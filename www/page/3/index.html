
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>CXH.ME</title>
  <meta name="author" content="Harry Chen">

  
  <meta name="description" content="在帝都仰望星空大学计算机学院读了本科，后辗转五道口工程技术大学软件学院读研。诗书代码皆兴趣，文化科技均可聊。流量惨淡，感谢拍砖~~">
  

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://cxh.me/page/3">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/libs/jquery.js"></script>
  <script src="/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/bootstrap.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="CXH.ME" type="application/atom+xml">
  <link href="/javascripts/google-code-prettify/prettify.css" media="screen, projection" rel="stylesheet" type="text/css">
<script type="text/javascript" src="/javascripts/google-code-prettify/prettify.js"></script>
<link href="/stylesheets/doc.css" media="screen, projection" rel="stylesheet" type="text/css">
<!--- MathJax Configuration -->
<script type="text/javascript"
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,http://drz.ac/javascripts/MathJaxLocal.js">
</script>

  

</head>



<body   >
  <nav role="navigation"><div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <a class="brand" href="/">CXH.ME</a>

      <div class="nav-collapse">
        <ul class="nav">
    <li><a href="/">Blog</a></li>
    <li><a href="/blog/archives">Archives</a></li>
    <li class="divider-vertical"></li>
    <li class="dropdown">
        <a data-toggle="dropdown" class="dropdown-toggle" href="#">技术相关<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="/category/ruan-jian-fa-bu">软件发布</a></li>
            <li class="divider"></li>
            <li><a href="/category/c-plus-plus">C++</a></li>
            <li><a href="/category/dot-net">.Net</a></li>
            <li><a href="/category/flex">Flex</a></li>
            <li><a href="/category/ji-chu-li-lun">基础理论</a></li>
            <li><a href="/category/latex">Latex</a></li>
            <li><a href="/category/linux">Linux</a></li>
            <li><a href="/category/mfc">MFC</a></li>
            <li><a href="/category/oceanbaseyuan-ma-fen-xi">Oceanbase</a></li>
            <li><a href="/category/others">其他</a></li>
            <li><a href="/category/php">PHP</a></li>
            <li><a href="/category/python">Python</a></li>
            <li><a href="/category/vim">vim</a></li>
            <li><a href="/category/web">web相关</a></li>
        </ul>
    </li>
    <li><a href="/category/ai-ti-ren-sheng">IT人生</a></li>
    <li><a href="/category/shi-qing-bai-tai">世情百态</a></li>
    <li><a href="/category/sui-bi">随笔</a></li>



</ul>


        <ul class="nav pull-right" data-subscription="rss">
          <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
          
        </ul>

        
          <form class="pull-right navbar-search" action="http://google.com/search" method="get">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:cxh.me" />
              <input class="search-query" type="text" name="q" results="0" placeholder="Search"/>
            </fieldset>
          </form>
        
      </div>
    </div>
  </div>
</div>
</nav>
  <div class="container">
    <div class="row-fluid">
      <div class="span9">
  
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/04/16/summary-of-cross-thread-ui-update-in-csharp/">简短总结一下C#里跨线程更新UI</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-16T00:00:00+08:00" pubdate data-updated="true">Apr 16<span>th</span>, 2012</time>
        
         | <a href="/2012/04/16/summary-of-cross-thread-ui-update-in-csharp/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>跨线程更新UI是写多线程程序尤其是通信类的程序经常遇到的问题，这里面主要的问题是冲突，比如数据线程想要更新UI的时候，用户同时也在更新UI，就会出现争用。C#里可以用</p>

<pre><code>Control.CheckForIllegalCrossThreadCalls = false;
</code></pre>

<p>来关闭跨线程检测。但是这样做有一定的风险，容易让程序崩溃。</p>

<p>最好的办法是通过Invoke，这篇博客只是提供一个示例，至于那些线程同步、Invoke和BeginInvoke，Invoke底层实现神马的，有空再说吧。</p>

<p>一个简单的例子如下：（注，Form1 加入了一个名为txt的TextBox）</p>

<pre><code>using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;

namespace testThread
{
    public partial class Form1 : Form
    {
        private delegate void InvokeCallback(string msg); //定义回调函数（代理）格式
        public Form1()
        {
            InitializeComponent();
            Control.CheckForIllegalCrossThreadCalls = false;//关闭跨线程调用检测
            MyMessage m = new MyMessage();//一个消息源
            //启动一个线程，把界面对象传递过去
            Thread t = new Thread(new ParameterizedThreadStart(m.Test));
            t.Start((object)this);
        }
        //Invoke回调函数
        public void UpdateText(string text)
        {
            if (txt.InvokeRequired)//当前线程不是创建线程
                txt.Invoke(new InvokeCallback(UpdateText),new object[]{text});//回调
            else//当前线程是创建线程（界面线程）
                txt.Text = text;//直接更新
        }
    }
    //消息源
    class MyMessage
    {
        public void Test(object para)
        {
            Form1 form = (Form1)para;
            form.UpdateText("测试");
        }
    }
}
</code></pre>

<p>上面的例子很简单，主要是需要判断一下当前线程是不是控件的创建线程，如果是就直接更新，否则建立一个Invoke对象，设置好代理和参数，然后调用Invoke。需要注意的是建立线程的时候如果需要传参数，应该通过ParameterizedThreadStart建立并且以object格式传递参数。</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/04/14/unable-to-enumerate-USB-device-error-in-some-thinkpad/">记ThinkPad某些型号下Linux报Unable to Enumerate USB Device错误的问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-14T00:00:00+08:00" pubdate data-updated="true">Apr 14<span>th</span>, 2012</time>
        
         | <a href="/2012/04/14/unable-to-enumerate-USB-device-error-in-some-thinkpad/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>这问题确实挺烦的，据说常见于某些ThinkPad系的笔记本，具体表现是不停的报</p>

<pre><code>Unable to enumerate USB device…..
</code></pre>

<p>的错误，而在某些Linux版本（比如pinguy os）下会不停提示Device Recognized和Device Removed，有人提供了如[1]的解决方案，但是好像在pinguy os 下并无效果，而且这实际上就是禁用了usb2.0，还有人直接禁用了全部usb。</p>

<p>这里面好像有硬件问题，但是如果是Thinkpad系普遍的问题的话，也就有点说不过去了，硬件不检测好就出场，这也不是Thinkpad的风格。后来想到会不会是指纹识别的问题，于是在BIOS里禁用指纹识别，一切OK。反正这是实验室的笔记本，也不能存我自己的指纹吧。</p>

<p>后来证实其实是指纹识别坏了…还好在保修内…</p>

<h2>参考文献：</h2>

<blockquote><p>[1] Solved: unable to enumerate USB device on port 1,</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/04/09/ways-to-initialize-variables-in-cplusplus/">C++变量的初始化方式</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-09T00:00:00+08:00" pubdate data-updated="true">Apr 9<span>th</span>, 2012</time>
        
         | <a href="/2012/04/09/ways-to-initialize-variables-in-cplusplus/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>写这个问题是受微软今年实习生招聘的一道笔试题启发，上一篇博客好像提到了。之前还真没细想过这些事情。</p>

<p>首先把需要初始化的成员变量分为几类：</p>

<blockquote><p>一般变量(int)</p>

<p>静态成员变量(static int)</p>

<p>常量(const int )</p>

<p>静态常量(static const int)</p></blockquote>

<p>对应的初始化方式是：</p>

<blockquote><p>一般变量可以在初始化列表里或者构造函数里初始化，不能直接初始化或者类外初始化</p>

<p>静态成员变量必须在类外初始化</p>

<p>常量必须在初始化列表里初始化</p>

<p>静态常量必须只能在定义的时候初始化</p></blockquote>

<p>举一个简单的例子</p>

<blockquote><h1>include</h1>

<h1>include</h1>

<p>using namespace std;
class Test
{
private:
int a;
static int b;
const int c;
static const int d=4;
public:
Test():c(3)//,a(1)或者在初始化列表里初始化
{
a=1;
}
};
int Test::b=2;</p>

<p>void main()
{
Test t;
}</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/04/09/the-initialization-order-of-class-member-variables/">关于类成员变量初始化顺序</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-09T00:00:00+08:00" pubdate data-updated="true">Apr 9<span>th</span>, 2012</time>
        
         | <a href="/2012/04/09/the-initialization-order-of-class-member-variables/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>java和C#语言里类变量初始化的顺序是</p>

<blockquote><ol>
<li><p> 类成员变量初始化先于类的构造函数</p></li>
<li><p> 静态成员变量先于实例变量</p></li>
<li><p> 父类成员变量先于子类成员变量 C#相反</p></li>
<li><p> 父类构造函数先于子类构造函数</p></li>
</ol>
</blockquote>

<p>举一个java的例子:</p>

<pre><code>class Base
{
    public static Test a=new Test("a");
    public static Test b;
    public Test c=new Test("c");
    public Test d;
    static
    {
        b=new Test("b");
    }
    public Base()
    {
        d=new Test("d");
    }
    public static void main(String[] args) {
        new Derived();
    }
}
class Derived extends Base
{
    public static Test da=new Test("da");
    public static Test db;
    public Test dc=new Test("dc");
    public Test dd;
    static
    {
        db=new Test("db");
    }
    public Derived()
    {
        dd=new Test("dd");
    }
}

class Test
{
    public Test (String name) {
        System.out.println(name);
    }
}
</code></pre>

<p>运行结果是：</p>

<pre><code>a
b
da
db
c
d
dc
dd
</code></pre>

<p>C 中没有成员变量定义时初始化的方式，所以有如下几条：</p>

<ol>
<li><p> 构造函数初始化列表的变量优先于构造函数（至少明显的写在前面）</p></li>
<li><p> 静态成员变量先于实例变量</p></li>
<li><p> 父类成员变量先于子类成员变量</p></li>
<li><p> 父类构造函数先于子类构造函数</p></li>
</ol>


<p>举一个例子：</p>

<pre><code>#include 
#include 
using namespace std;
class Test
{
public:
    Test(string n)
    {
        cout
</code></pre>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/04/07/about-const-and-pointer/">关于const和指针的专题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-07T00:00:00+08:00" pubdate data-updated="true">Apr 7<span>th</span>, 2012</time>
        
         | <a href="/2012/04/07/about-const-and-pointer/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>const和指针的问题是笔试里经常出现的问题。这里综合一下各种不同的情况。</p>

<p>首先是几种const与指针组合的区分，比如：</p>

<blockquote><p>int b = 500;
const int<em> a = &b; [1]
int const </em>a = &b; [2]
int<em> const a = &b; [3]
const int</em> const a = &b; [4]</p></blockquote>

<p>[1]和[2]其实是一样的，都是指向int型常量的指针，而[3]是int型常量指针，两者的区别是指向常量的指针本身可以指向别的，所指向的数据不能被修改，而常量指针本身不能被修改。[4]就不用说了，啥都甭想改。</p>

<p>至于例子，可以举下面的一个例子（以[1]为例）。这里小小的牵扯了一点优先级的问题。</p>

<blockquote><h1>include</h1>

<p>using namespace std;</p>

<p>int main(int argc,char<em> argv[])
{
int a=1;
const int </em>b=&a;
<em>b ;//成立
(</em>b) ;//编译器错误
}</p></blockquote>

<p>那么我们能不能突破const去修改一个值呢？虽然这件事情本身并没有多大意义，但是还是可以做的。我们可以用const_cast来去掉一个const或者volatile限制。const_cast的作用主要分如下三种：</p>

<blockquote><p>转化一个常量指针为非常量指针</p>

<p>转化一个常量引用为非常量引用</p>

<p>转化一个常量对象为非常量对象</p></blockquote>

<p>至于例子</p>

<p>我们举如下一个例子：</p>

<blockquote><h1>include</h1>

<p>using namespace std;</p>

<p>class Test
{
public:
const int a ;
Test(int b):a(b)
{</p>

<p>}
};</p>

<p>int main(int argc,char<em> argv[])
{
Test t(1);
//t.a=2;//出错
int b=const_cast(t.a);
int&amp; c=const_cast(t.a);
int</em> d=const_cast(&amp;t.a);
b=2;
c=3;
cout</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/04/02/some-problems-about-apache-address-rewrite/">Apache地址重写的几个问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-04-02T00:00:00+08:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2012</time>
        
         | <a href="/2012/04/02/some-problems-about-apache-address-rewrite/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>Apache地址重写的配置分为两种方式即通过httpd.conf配置和.htaccess文件。</p>

<p>首先要打开rewrite模块windows下的配置是</p>

<blockquote><p>LoadModule rewrite_module modules/mod_rewrite.so</p></blockquote>

<p>httpd.conf的配置可以全局生效也可以只配置一个目录需要做的事情是在相应目录的Directory标签下配置Rewrite规则。</p>

<p>.htaccess的则放到相应目录下或者根目录即可这是VPS里常用的一种方式毕竟作为一个VPS购买者不可能要求提供商去更改全局配置文件。这种方式需要注意的有如下两点</p>

<p>首先.htaccess要想起作用必须要在httpd.conf中相应的Directory标签下配置AllowOverride All默认是None其次是windows下这种无文件名仅有扩展名的文件是无法直接生成的可以在cmd窗口下使用copy con命令来生成这命令也有年头了我小学的时候还学过光阴荏苒啊扯远了…Ctrl Z保存。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2012/04/image_thumb.png" title="image" alt="image" /></p>

<p>然后我们说一下几个概念。</p>

<p>首先是RewriteEngine这是地址重写的引擎可以方便的设置为On或者Off来启用和关闭引擎。</p>

<p>其次是RewriteCond地址重写的条件符合这个条件的才进行表达式判断和重写这样能有效减少匹配的条数提高重写效率。</p>

<p>最后是RewriteBase和RewriteRuleRewriteBase指明重定向地址的基础即RewriteRule后一部分重定向地址会拼合上RewriteBase合成一个完整的重定向地址。这在一个web容器下有多个网站的时候比较有用。</p>

<p>RewriteRule才是我们讨论的主要话题。RewriteRule实现把符合表达式的地址重定向到另一个地址的功能RewriteRule的语法类似于下面</p>

<blockquote><p>RewriteRule ^forum-([0-9] )&ndash;([0-9] )&#46;html$ forumdisplay.php?fid=$1&amp;page=$2</p></blockquote>

<p>RewriteRule紧跟着判断表达式之后是需要重定向的位置正则表达式()会捕获一个分组然后通过$n引用这个分组从而实现地址重写。RewriteRule匹配的开始位置是整个URL去掉当前目录后剩下的部分比如我在/discuz配置上面所示的RewriteRule然后输入一个URL-<a href="http://localhost/discuz/forum-1-1.html%E8%A2%AB%E7%94%A8%E6%9D%A5%E5%8C%B9%E9%85%8D%E7%9A%84%E8%BE%93%E5%85%A5%E4%BC%9A%E6%98%AFforum-1-1.html%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%89%8D%E9%9D%A2%E7%9A%84/discuz/%E8%A2%AB%E5%90%83%E6%8E%89%E4%BA%86%E3%80%82%E5%AF%B9%E4%BA%8E%E6%95%B4%E4%B8%AA%E9%97%AE%E9%A2%98%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%A6%82%E4%B8%8B%E7%9A%84%E8%AF%AD%E5%8F%A5%E9%AA%8C%E8%AF%81%E3%80%82">http://localhost/discuz/forum-1-1.html%E8%A2%AB%E7%94%A8%E6%9D%A5%E5%8C%B9%E9%85%8D%E7%9A%84%E8%BE%93%E5%85%A5%E4%BC%9A%E6%98%AFforum-1-1.html%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%89%8D%E9%9D%A2%E7%9A%84/discuz/%E8%A2%AB%E5%90%83%E6%8E%89%E4%BA%86%E3%80%82%E5%AF%B9%E4%BA%8E%E6%95%B4%E4%B8%AA%E9%97%AE%E9%A2%98%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E7%94%A8%E5%A6%82%E4%B8%8B%E7%9A%84%E8%AF%AD%E5%8F%A5%E9%AA%8C%E8%AF%81%E3%80%82</a></p>

<blockquote><p>RewriteRule ^(.*)/forum-([0-9] )&ndash;([0-9] )&#46;html$ rewrite.php?param=$1</p>

<p>注在rewrite.php里打印一下GET[&lsquo;param’]参数</p></blockquote>

<p>另外这里需要说明的是如果我定义了</p>

<blockquote><p>RewriteBase /discuz</p></blockquote>

<p>那么前面的<sup>forum</sup>-([0-9] )&ndash;([0-9] )&#46;html$不受影响但是后面会变成/discuz/forumdisplay.php?fid=$1&amp;page=$2。不过RewriteBase并不是必须的若有指定RewriteBase结果为RewriteBase 重定向地址否则为当前目录 重定向地址。这里当前目录指的是.htaccess所在目录使用.htaccess的时候或者Directory标签指定的目录使用httpd.conf的时候。</p>

<p>以上操作在windows下测试通过。</p>

<p>参考文献</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2012/04/image_thumb.png" title="image">1</a>Apache中RewriteCond规则参数介绍</p>

<p><a href="http://hi.baidu.com/%D2%BB/blog/item/ace7f14e19851cc4d0c86af2.html">http://hi.baidu.com/һ/blog/item/ace7f14e19851cc4d0c86af2.html</a></p>

<p><a href="http://hi.baidu.com/%D2%BB/blog/item/ace7f14e19851cc4d0c86af2.html">2</a>RewriteRule-htaccess详细语法使用教程</p>

<p><a href="http://www.3code.cn/rewriterule-htaccess%E8%AF%A6%E7%BB%86%E8%AF%AD%E6%B3%95%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">http://www.3code.cn/rewriterule-htaccess详细语法使用教程/</a></p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/03/31/some-problems-about-doxygen/">Doxygen几个小问题，mark一下</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-31T00:00:00+08:00" pubdate data-updated="true">Mar 31<span>st</span>, 2012</time>
        
         | <a href="/2012/03/31/some-problems-about-doxygen/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>首先是在Visual Assist X中的配置，在Snippet Editor窗口修改一下file header的snippet和Refactor Document Method的snippet.</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2012/03/image_thumb5.png" title="image" alt="image" /></p>

<p>设置分别如下</p>

<p>file header</p>

<p>/<em>*
* @file $FILE_BASE$.$FILE_EXT$
* @Synopsis $end$
* @author 你的名字,你的邮箱
* @version $version$
* @date $DAY$:$MONTH$:$YEAR$
</em>/</p>

<p>Refactor Document Method</p>

<p>/<em> —————————————————————————-</em>/
/<em><em>
* @Synopsis $SymbolName$
* $end$
* @Param $MethodArg$
*
* @Returns $SymbolType$
</em>/
/</em> —————————————————————————-*/
然后记得DoxygenWizard的这个工作目录是一定要点选的，这里有个触发，如果直接复制路径进去是无法run doxygen的。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2012/03/image_thumb6.png" title="image" alt="image" /></p>

<p>最后是中文编码的问题，如果你的项目是GBK编码，那么要防止乱码必须要做的事情是设置工程为UTF-8编码，而设置输入为GBK。切记。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2012/03/image_thumb7.png" title="image" alt="image" /></p>

<p><img src="http://www.roybit.com/wp-content/uploads/2012/03/image_thumb8.png" title="image" alt="image" /></p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/03/28/publish-the-vim-buffer-management-plugin/">发布VIM缓冲区切换插件buf_it升级版</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-28T00:00:00+08:00" pubdate data-updated="true">Mar 28<span>th</span>, 2012</time>
        
         | <a href="/2012/03/28/publish-the-vim-buffer-management-plugin/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>VIM默认使用的过程中有一个重要的问题，就是打开多个文件的时候无法可视化看到打开的文件，并在这些文件中切换。MiniBufExplorer是一个常用的buffer切换插件，但是这个插件在Windows下使用的时候有许多问题，同时也太繁琐。buf_it<a href="http://www.roybit.com/wp-content/uploads/2012/03/image_thumb4.png" title="image">1</a>则实现了轻量的buffer管理，但是buf_it同样在windows下有许多问题，而buf_it的退出机制也会出现只想关闭一个文件确关闭了整个vim的情况。</p>

<p>基于这两个问题，我修改了buf_it插件，这里共享出来，欢迎大家提意见。先给张图</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2012/03/image_thumb4.png" title="image" alt="image" /></p>

<p>修改：</p>

<blockquote><p>1 windows下使用GVIM优化，方式多开一个空白缓冲区，windows下gvim右键配置见参考文献2</p>

<p>2 增加自定义退出方式</p>

<p>3 修改了部分快捷键，只是个人习惯，可无视之</p></blockquote>

<p>安装：</p>

<blockquote><p>直接扔到plugin目录就行，原作者没写doc，那我也不写啦。</p></blockquote>

<p>配置：</p>

<blockquote><p>nnoremap wq :w:call BufClose()
nnoremap q :call BufClose()
nnoremap w :w
nnoremap x :bd!:call BufClose()</p></blockquote>

<p>使用：</p>

<blockquote><p>shift h,l ：左右切换tab</p>

<p>be ：BufEcho 显示当前缓冲区名字</p>

<p>bo ：只保留当前缓冲区，其他的都关掉</p>

<p>alt i : 切换到序号为i的缓冲区</p>

<p>wq: 保存关闭当前缓冲区并退出</p>

<p>q: 关闭当前缓冲区并退出</p>

<p>w: 保存当前缓冲区</p>

<p>x: 不保存关闭当前缓冲区</p></blockquote>

<p>下载:<a href="http://www.roybit.com/wp-content/uploads/2012/03/buf_it.rar">buf_it</a></p>

<p>参考文献：</p>

<blockquote><p><a href="http://www.roybit.com/wp-content/uploads/2012/03/image_thumb4.png" title="image">1</a> buf_it : Buffer list in statusline,</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2012/03/buf_it.rar">2</a> 在windows下给你的右键菜单添加&#8221;edit with vim&#8221;的方法,</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/03/16/solve-the-problem-of-too-large-space-between-itemize-in-Latex/">解决Latex中Itemize距离过大的问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-16T00:00:00+08:00" pubdate data-updated="true">Mar 16<span>th</span>, 2012</time>
        
         | <a href="/2012/03/16/solve-the-problem-of-too-large-space-between-itemize-in-Latex/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>默认的itemize存在行距过大的问题，大概是如下的样子：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2012/03/image_thumb2.png" title="image" alt="image" /></p>

<p>用paralist包可以减少行距，代码如下</p>

<blockquote><p>\usepackage{paralist}
\let\itemize</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/03/15/two-ways-to-generate-chinese-in-Latex/">两种可行的Latex中文生成方式(GBK/UTF8)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-15T00:00:00+08:00" pubdate data-updated="true">Mar 15<span>th</span>, 2012</time>
        
         | <a href="/2012/03/15/two-ways-to-generate-chinese-in-Latex/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>本来想总结一下Latex里各种中文排版支持，但是发现太乱了，CCT，CJK，CTEX神马的，还有GBK和UTF8下的不同编码方式，再加上XeLatex这样来搅局的……所以最后决定只给出一种可行的排版方式，测试环境是Windows CTex2.8。</p>

<p>ps:每天忍辱负重的在Windows下用Vim和Latex……</p>

<p>第一种是gbk编码下的编译方式</p>

<blockquote><p>REM taskkill /im AcroRd32.exe
pdflatex %1
bibtex %1
pdflatex %1
gbk2uni %1.out
pdflatex %1
start %1.pdf</p></blockquote>

<p>其中第一句的目的是结束掉当前的PDF文档，但是它会随机选择一个Acrobat Reader进程结束，所以给注掉了。从代码里可以看出，需要执行多遍pdflatex，同时穿插bibtex生成参考文件，gbk2uni的作用是将gbk转成unicode，这个命令是cct里的，请确保你的环境变量中有cct的bin目录。</p>

<p>测试article代码如下：</p>

<blockquote><p>\documentclass{article}
\usepackage{CJK}
\usepackage{cite}
ewcommand{\upcite}[1]{ extsuperscript{ extsuperscript{</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/03/14/using-visio-vector-diagram-in-Latex/">Latex中使用visio的矢量图(转载+修改）</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-14T00:00:00+08:00" pubdate data-updated="true">Mar 14<span>th</span>, 2012</time>
        
         | <a href="/2012/03/14/using-visio-vector-diagram-in-Latex/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>我们知道，visio用来画流程图等专业图很方便，而Latex的专业排版效果是Word所不能比的，而Visio不支持导入eps和dvi格式的矢量图，而导出jpeg毕竟有质量损失，那么怎么才能在Latex中直接使用visio导出的矢量图呢？</p>

<p>1. Visio可以保存为wmf，emf等矢量图形格式（word的默认插图格式），再转换为eps格式（可使用TpX，由本论坛得知早期版本貌似可直接保存eps）插入LaTeX。可转换后的eps图片格式不稳定，图形易错位；另外Visio使用Windows字体，转换后的eps图形只引用而不包含字体，插入LaTex后由于找不到对应字体，中文（或mathtype公式，特殊符号）会乱码。
2. 用ps虚拟打印的方式虽然可以解决格式和乱码问题，但中文字符（或其他不支持的内容）会按位图处理，得不到完美的矢量图形。
经过探索，将visio保存为pdf格式是最完美的解决方式，因为pdf文件保存了所有格式和字体信息。借助pdfcrop和ebb程序，调用graphicx宏包插入pdf格式图片，能够得到完美的visio矢量图形。</p>

<p>注：
1.导入的代码依然可以使用标准的fig标签，例如：
egin{figure}</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/03/14/ajust-distance-between-table-title-and-content-in-Latex/">Latex里图片与表格标题与正文距离的调整</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-14T00:00:00+08:00" pubdate data-updated="true">Mar 14<span>th</span>, 2012</time>
        
         | <a href="/2012/03/14/ajust-distance-between-table-title-and-content-in-Latex/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>首先，我们这里的图表用的分别是figure和table标签，宏包应该是graphicx和??，我们需要调整的距离是其标题(caption)的前后的空白，比如下面图中所示：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2012/03/image_thumb.png" title="image" alt="image" /></p>

<p>首先，我们可以通过如下代码设置这个距离，above设置标题上面的距离，below设置标题下面的距离。</p>

<blockquote><p>\setlength{bovecaptionskip}{10pt}
\setlength{elowcaptionskip}{-10pt}</p></blockquote>

<p>需要特别说明的是一点，网上好像都没有人说这个事情。如果标题在图标的上面的话，这两个距离是反的，这点让人觉得很不适应。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2012/03/image_thumb1.png" title="image" alt="image" /></p>

<p>参考文献：</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/03/05/xheditor-for-typeecho-plugin-supports-file-upload/">支持上传文件的xhEditor for Typecho EX插件</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-05T00:00:00+08:00" pubdate data-updated="true">Mar 5<span>th</span>, 2012</time>
        
         | <a href="/2012/03/05/xheditor-for-typeecho-plugin-supports-file-upload/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>Typecho是一套超轻量的开源博客，界面简洁，功能紧凑，但是Typecho的文本编辑器实在是不好，需要自己写html代码，插图也不方便。试用了几个插件，发现TinyMCE回车总有问题，每次保存就多几个空行，其他几个插件也有类似问题。于是就想能不能把xhEditor这个强大的可视化HTML编辑器移植过去，后来找到一个xhEditor for Typecho插件，下载地址在<a href="http://115.com/file/atedbyls">这里</a>，作者主页。这个插件不支持上传图片，而插件使用之后系统本身的插图功能就不能用了，所以导致图片只能贴网络图了。</p>

<p>于是决定在这个插件基础上改进，主要是</p>

<blockquote><p>增加了图片/多媒体文件上传功能
增加More标签直接插入功能
修改三种工具栏模式，保证每种模式都有查看源码、Preview和More标签按钮
更新xheditor到最新版1.1.13</p></blockquote>

<p>你可能需要在admin/css/typeecho.source.css里改一下body的一个默认颜色，否则导致上传图片的弹窗左边的字显示为白色而看不到。需要说明的是，这一版More标签没有直接的可视化效果，点了之后请到源码里查看，以后有时间再做效果。另外，没时间给More做个小图标了，直接用了显示源码的那个按钮的图标。</p>

<p>有bug请留言。谢谢。下载地址:<a href="http://www.roybit.com/wp-content/uploads/2012/03/XhEditor-for-Typecho.rar" title="XhEditor for Typecho">XhEditor for Typecho EX</a></p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/03/01/change-the-name-of-blog/">博客域名更改</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-01T00:00:00+08:00" pubdate data-updated="true">Mar 1<span>st</span>, 2012</time>
        
         | <a href="/2012/03/01/change-the-name-of-blog/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>之所以要改域名，是因为之前的域名无论英文还是中文都被隐藏在一堆布拉德皮特（Brad Pitt）的新闻里，搜索不到，长此以往，博将不博。其实布拉德皮特的电影我只看过《西（和谐）藏十年》，对他并无反感，但是作为一个博客总夹在娱乐新闻里想不娱乐都难，我写的可是正正规规的技术文章啊亲……</p>

<p>Roy这名字似乎是某个英国国王的名字，也有不少人用这个做姓，老外的姓氏和名字还真是混乱啊，不过想想同学里似乎也有叫王林的，也就无所了，反正我可是注册到了六位的还有一定含义的域名，六位啊亲……</p>

<p>就这样吧。</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/02/24/ways-to-change-ports-in-exsi/">ESXi修改默认端口的方法(zz)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-24T00:00:00+08:00" pubdate data-updated="true">Feb 24<span>th</span>, 2012</time>
        
         | <a href="/2012/02/24/ways-to-change-ports-in-exsi/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>转载自网络，找不到出处了，没试过，应该是对的。</p>

<p>修改默认端口的方法： 端口 80 (http) 443 (https)
root登录后
vi /etc/vmware/hostd/proxy.xml
找到下添加以下内容
custom port #
custom port #
保存文件
重新启动vmware-hostd服务</p>

<h1>service mgmt-vmware restart</h1>

<p>例子：添加以下为分别改为81 444
81
444</p>

<p>ESX 4.0测试通过</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2012/02/24/vmware-esxi-5-nat-on-admin-ports/">VMware ESXi 管理端口的NAT配置</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-02-24T00:00:00+08:00" pubdate data-updated="true">Feb 24<span>th</span>, 2012</time>
        
         | <a href="/2012/02/24/vmware-esxi-5-nat-on-admin-ports/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>先复习一下VMWare的基本网络概念。</p>

<p>VMware ESXi使用桥接（猜测，错了不管）的方式实现网络配置，通过虚拟交换机的概念来模拟物理交换机，这样连接在同一个交换机下的虚拟机相当于处于一个网段之内，如下图所示，管理端口和pfSense（NAT系统）处于一个网段，pfSense添加了两个虚拟交换机，这样就等于接通了两个网段，起NAT的作用，WAN口处于8网段，LAN口在1网段做DHCP，其他两个操作系统（win2k8和RHEL5.4）只连接内网，通过pfSense做NAT到这些虚拟机上。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/11/1.png" alt="1.png" /></p>

<p>接着说为什么要重做NAT。前几篇文章我们已经实现了一个ESXi上的NAT架构，但新的问题出现了：之前管理端口（8.232）是单独的一个IP，而我们的服务器搭建好之后往往只绑定一个外网IP，然后就远程管理了，这样如果管理端口还使用一个单独的内网IP，我们从外网就没有办法使用Sphere Client管理了。于是需要把管理端口也放到NAT的内网，从NAT映射到管理端口上去。</p>

<p>首先，ESXi本身使用两个端口（不考虑SSH），一个443端口放一个简单的介绍网页（https），剩下的是Sphere Client使用的端口902（ESX Server好像是903），如果想更改端口，更改方式在下篇文章中再谈。</p>

<p>这样我们需要做的是，首先在NAT的虚拟交换机中添加VMKernel</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2012/02/1_thumb.jpg" title="1" alt="1" /></p>

<p>设置好内网IP ，更改默认网关</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2012/02/2_thumb.jpg" title="2" alt="2" /></p>

<p>这时候其实就可以进内网的一个操作系统(比如我的win2k8)，telnet一下192.168.1.4的902端口，看看是否可以使用了，如果可以使用，在这个操作系统下就可以用Sphere Client连接ESXi了，只不过有点慢。</p>

<p>开始的时候我直接在pfSense做了NAT（443和902，到192.168.1.4上），结果发现外网根本telnet不了这两个端口，最后想想干脆把标准交换机0上的那个192.168.8.232的Management Network移除好了，关掉了过程中弹出的几个语气严厉的警告窗口之后，再telnet，就可以使用了。这时候如果到物理服务器上，f2进入ESXi的配置界面，就可以看到Network Configuration那里已经改成了192.168.1.4的IP和192.168.1.1的网关。</p>

<p>这样，你的管理端口，几个虚拟机就都进入了pfSense的管辖范围里了，也就是说，从公网IP映射到pfSense的WAN口IP，剩下的NAT都是pfSense来做了，无论是ESXi本身，还是其上的虚拟机。最后的网络配置如下，Management Network移除之后不会消失，但是已经没有IP显示了。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2012/02/3_thumb.jpg" title="3" alt="3" /></p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/11/29/vmware-esxi-5-network-configuration/">VMware ESXi 网络配置</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-29T00:00:00+08:00" pubdate data-updated="true">Nov 29<span>th</span>, 2011</time>
        
         | <a href="/2011/11/29/vmware-esxi-5-network-configuration/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>上一讲忘了扯一下vCenter，大家应该经常会看到Sphere vCenter，这个是用来管理多台ESX(i) Server的，换句话说，是虚拟云的管理端，详见官方白皮书<a href="http://www.roybit.com/wp-content/uploads/2011/11/1_thumb.png" title="1">1</a>。所以如果你只有一台服务器，大可不必搭理。另外大家应该也经常看到VMware Appliance这种名字，实际上就是装好的VMWare虚拟机镜像，我们可以用VMware Converter安装到远程服务器上。这个之后我们也会提到。</p>

<p>现在我们搭建了好了ESXi Server，同时建立了虚拟机，现在开始为虚拟机配置网络。ESXi的网络理念和VMware WorkStation完全不一样，我们在WorkStation里用的那一套[3]没法在这里用。ESXi Server里，你能看到类似于这样的网络拓扑结构，虚拟交换机的概念替代了之前的三种网络模式，具体概念参见[2]。我们可以简单理解，ESXi把物理交换机完全屏蔽了，你可以建立一台虚拟交换机，然后也不需要考虑这台虚拟交换机的接口问题，直接进操作系统配置你的IP就行了，你可以想想虚拟机就是一台跟物理机一样的机器，甚至这个管理端口Management Network的IP也是可以随便换的，至于为什么ESXi能随意绑定IP，可以想见，应该也是通过了Bridge桥接技术，通过把网卡设置为混杂模式，用类似于ARP欺骗的技术来实现桥接。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/11/1_thumb.png" title="1" alt="1" /></p>

<p>样例可参考[4]，需要说明的是，每个适配器相当于一个网卡，虽然你可以不指定，一个操作系统，添加了多个虚拟网络之后，就相当于有了多个网卡，每个网卡按照应该遵循的配置来配置，至于NAT，ESXi默认不支持NAT，所以如果有NAT，一定是路由器给你做的。所以作者在WAN适配器配置外网IP，LAN配置局域网IP，PAN配置服务器内网IP。相当于三块网卡。</p>

<p>下一讲讲ESXi的NAT实现。转载请注明出处。</p>

<p>参考文献：</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2011/11/1_thumb.png" title="1">1</a> VMware vCenter Server</p>

<p>[2] VMware Virtual Networking Concepts</p>

<p>[3] VMware网络配置详解</p>

<p>[4] ESXi虚拟网络配置的几点认识</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/11/29/vmware-esxi-5-nat/">VMware ESXi NAT实现</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-29T00:00:00+08:00" pubdate data-updated="true">Nov 29<span>th</span>, 2011</time>
        
         | <a href="/2011/11/29/vmware-esxi-5-nat/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>上节我们讲到VMware ESXi默认不支持NAT，但是我们如果只有一个外网端口映射，然后希望通过这个映射，从外网访问两台机器的话，那最好做NAT。这里我们通过一个开源的网络防火墙pfSense来实现NAT<a href="http://www.roybit.com/wp-content/uploads/2011/11/logo_thumb.png" title="logo">1</a>。当然也有人通过Zental实现<a href="http://blog.romant.net/wp-content/uploads/2010/07/Step2.png">2</a>，或SmoothWall神马的<a href="http://blog.romant.net/wp-content/uploads/2010/07/Step3_121.png">3</a>。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/11/logo_thumb.png" title="logo" alt="logo" /></p>

<p>首先建立一个NAT使用的虚拟交换机</p>

<p><img src="http://blog.romant.net/wp-content/uploads/2010/07/Step2.png" alt="" /></p>

<p>弹出如下对话框的时候不要选择任何物理网卡，这个虚拟交换机是专门用来做NAT的。</p>

<p><img src="http://blog.romant.net/wp-content/uploads/2010/07/Step3_121.png" alt="" /></p>

<p>改个名字</p>

<p><img src="http://blog.romant.net/wp-content/uploads/2010/07/Step3_13.png" alt="" /></p>

<p>完成之后，你就有了两个可用的虚拟交换机。</p>

<p><img src="http://blog.romant.net/wp-content/uploads/2010/07/Step_last_summary_2.png" alt="" /></p>

<p>然后建立pfSense的虚拟机，我们通过VMConverter来实现，这样更快一些。首先下载VMWare vCenter Converter ()，我们直接在本地运行Converter任务，然后向服务器上上传虚拟机文件，所以选择对应你本地操作系统的版本，安装的时候选择本地安装。然后下载pfSense，注意我们要下载Vmware Appliance版本，还记得之前说的Appliance概念吗，我们这里就通过Appliance简化安装。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/11/image_thumb.png" title="image" alt="image" /></p>

<p>选择虚拟机文件 ，填入用户名，ip，和密码</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/11/image_thumb1.png" title="image" alt="image" /></p>

<p>剩下的事情就不用操心了。</p>

<p>启动pfSense虚拟机之前注意为pfSense系统添加网卡，NAT和原来的网络都要添加，<img src="http://blog.romant.net/wp-content/uploads/2010/07/Step_last.png" alt="" /></p>

<p>之后启动pfSense，配置网络</p>

<p><img src="http://blog.romant.net/wp-content/uploads/2010/07/pfsense_config_2.png" alt="" /></p>

<p>结果大概是这样，具体的教程见<a href="http://blog.romant.net/wp-content/uploads/2010/07/Step3_121.png">3</a></p>

<p><img src="http://blog.romant.net/wp-content/uploads/2010/07/pfsense_summary.png" alt="" /></p>

<p>最后指定虚拟操作系统的网络接口</p>

<p><img src="http://blog.romant.net/wp-content/uploads/2010/07/client_network.png" alt="" /></p>

<p>剩下的NAT配置什么的，参考<a href="http://blog.romant.net/wp-content/uploads/2010/07/Step3_13.png">4</a>吧。一系列教程，讲的非常详细了。教程里的图都来自<a href="http://www.roybit.com/wp-content/uploads/2011/11/logo_thumb.png" title="logo">1</a>，这哥哥真帮了大忙了。</p>

<p>参考文献：</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2011/11/logo_thumb.png" title="logo">1</a> Configuring NAT on ESX and ESXi,</p>

<p><a href="http://blog.romant.net/wp-content/uploads/2010/07/Step2.png">2</a> Configure NAT on Esxi Server,</p>

<p><a href="http://blog.romant.net/wp-content/uploads/2010/07/Step3_121.png">3</a> SmoothWall Express as NAT on ESXi</p>

<p><a href="http://blog.romant.net/wp-content/uploads/2010/07/Step3_13.png">4</a> pfSense学习</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/11/29/vmware-esxi-5-configuration/">VMware ESXi 5安装配置部分</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-29T00:00:00+08:00" pubdate data-updated="true">Nov 29<span>th</span>, 2011</time>
        
         | <a href="/2011/11/29/vmware-esxi-5-configuration/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>折腾了两天，终于搞懂了是怎么回事了。这里写一下详细配置，给其他像我这样的小白一个参考。</p>

<p>首先明确一下ESXi是干嘛的。</p>

<blockquote><p>VMware ESXi是VMware的嵌入式hypervisor。ESXi没有服务控制台，可以说是一个精简版的ESX。对于由于成本和硬件还没有开始实施虚拟化的组织来说，使用免费的VMware ESXi hypervisor不失为着手虚拟化的好方式。[3]</p>

<p><img src="http://www.servicetech.com.hk/img/vmware_esxi.gif" alt="VMware ESXi ¥i¦bµw¥ó¤Wª½±µ¹B¦æ" /></p>

<p>图1：VMware ESX系列架构<a href="http://www.servicetech.com.hk/img/vmware_esxi.gif">1</a></p></blockquote>

<p>而ESXi可以看做ESX Server的轻量化版本。</p>

<p>两者的区别见文献<a href="https://www.vmware.com/cn/tryvmware/?p=free-esxi5&amp;lp=default">2</a>，还有一个非常不错的专题[3]</p>

<p>我在一台Dell R710服务器上搭建了一个ESXi Server，同时运行两台服务器，一台RHEL5.4，一台Win2K8。详细过程如下：</p>

<p>首先需要注意的是很多服务器购买的时候，内置软件有远程管理模块。比如DELL的iDRAC，实际上来讲，用处不大，而且iDRAC占用着一些端口（比如HTTPS 443），导致我安装了ESXi之后一度连接不上也看不到web提示页面。这里我们先禁用iDRAC。从System Setup进入Dell内置管理系统，然后不给iDRAC配置IP地址（原则上讲开始是没有配置IP的，但是大部分人的习惯是进去把IP配置了，I suppose）。之后在管理系统里建立RAID，注意RAID1是热备份的，相当于你只有一半硬盘空间可用。然后选择安装操作系统，系统类型选择ESXi 4，放入系统光盘。实际上我从官网下载（<a href="https://www.vmware.com/cn/tryvmware/?p=free-esxi5&amp;lp=default">https://www.vmware.com/cn/tryvmware/?p=free-esxi5&amp;lp=default</a>）了ESXi5，但不影响。ESXi安装可以参考[4]，绝对通俗易懂。</p>

<p>进入ESXi之后可以选择开启SSH和ESXiShell，这样你就可以远程登陆到ESXi做点很底层的事情，至于ESXiShell，这是个定制的Shell，里面只保留了一部分的Linux命令，然后加入了一部分ESXi自己的命令。传说ESXi需要用账号unsupported登陆，而这个unsupported本身是不受服务支持的，改坏了自己负责。但是实际上用root登陆就行了。</p>

<p>其实最常用的还是VMware Sphere Client，虽然官方有命令行工具Sphere CLI，但是大部分人不会去使用。安装完ESXi之后，浏览器输入IP应该就能看到一个页面了。然后用Sphere Client登陆之后可以做相应操作，比如安装操作系统什么的。</p>

<p>这里一定要注意一个问题，安装操作系统的时候不能断开Sphere Client，我在这问题上2了很久，后来才想到原来是这个原因。就像远程桌面连接拷东西的时候不能退出一样，这东西不会后台自动运行的，退出，就没了。</p>

<p>下一讲讲一下ESXi的网络配置，欢迎关注。转载请注明出处。</p>

<p>参考文献：</p>

<p><a href="http://www.servicetech.com.hk/img/vmware_esxi.gif">1</a> 產品方案 – VMware – ESXi 入門教學，</p>

<p><a href="https://www.vmware.com/cn/tryvmware/?p=free-esxi5&amp;lp=default">2</a> ESX还是ESXi？这也是个问题，</p>

<p>[3] 虚拟化hypervisor：VMware ESXi全面解析，</p>

<p>[4]Vmware_ESXI_4.0_安装详解(图文)，</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/11/26/about-tencent-zhangxiaolong/">转载: 腾讯的张小龙是一个什么样的人</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-11-26T00:00:00+08:00" pubdate data-updated="true">Nov 26<span>th</span>, 2011</time>
        
         | <a href="/2011/11/26/about-tencent-zhangxiaolong/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>有人在知乎上问：腾讯的张小龙是一个什么样的人？
下面是我的回答：</p>

<p>5年前，张小龙是中国Top10的程序员。
他一个人写代码，完成了Foxmail的头三个版本。
Foxmail如此受到欢迎，以至于他不得不外放了语言包，让各种忠实粉丝翻译为十几种语言。
直至今日，Foxmail被收购，QQmail推出，Foxmail的企业用户依然有数百万。</p>

<p>在被腾讯收购之后，Foxmail开始了艰难的转变，从客户端转变为Web产品。
一开始非常不顺利，最早的版本类似Web上的巨无霸，几乎无法操作。
从程序员到管理者，从客户端产品经理到Web产品经理，
张小龙度过了极为孤独的三年时光。
三年后，他完成了第一次变形。
QQmail被腾讯内部称为“七星级产品”。
人们经常用一个例子来说明QQmail在产品体验上的细腻入微：
如果你在邮件正文里提到“附件”，而你在发送时并没有粘贴任何附件，
那么系统会立即提醒：您是否忘了加上附件。
这一体验现在Gmail也有了。</p>

<p>QQmail的成功，却让张小龙感觉到焦灼。
因为邮箱对于大数量的普通网民而言，依然是一个门槛极高的产品。
也许，教会他们用@符号都需要许多年。
还有什么是海量网民所需要的产品？
张小龙开始了他的第二次转变，
从Web工具类产品，进入Web社交类产品。</p>

<p>这一过程大约耗费了不到两年时间，
难度比上一次更大，周折更多。
张小龙和他的团队最先试验了阅读空间，
这是跳出工具类产品的第一个接榫。
做阅读空间貌似是一个工具，但是其中会有简单的人际互动。
可以观察用户的行为和交互习惯。</p>

<p>阅读空间获得了成功，
于是就有了QQ邮箱广播的尝试。
这是在QQ邮箱中试图打造一个类Twitter产品的尝试。
163邮箱也做过类似的事情，
但是这个项目失败了，用户和内容并入了腾讯微博。
在邮箱的使用场景下，
阅读空间的慢速阅读和深阅读是和邮箱调性相契合的，
但是和快速流动的Tweets流却不能相容。</p>

<p>于是，又有了QQ邮箱漂流瓶。
这是一场试验，
主题是：假设在大用户数量基础上，做轻SNS类应用，尤其是陌生人交友，是否能够获得成功？
结果空前成功。
每天的漂流瓶达到了骇人听闻的数量级，
用户粘性也得到了非常可观的增长。
这个试验的副产品是正视了普通网民内心深处是何等孤独。
以至于他们愿意一次次用尽写瓶中信的每日三次机会，
愿意一次次打捞蓝色页面中转瞬即逝的电子漂流瓶。</p>

<p>第三次转变突然到来，
张小龙的目光早已经从Web跳转到了移动互联网。
只是一个简单的要求，
团队中的程序员就从原来的岗位离开，
开始学习手机客户端的编程。
原来在QQmail手机随身邮上的经验，
被广泛应用到了微信的打造过程中。
新的手机团队不是做一个客户端，
而是IOS、安卓、塞班三个客户端同时开始做，
放出IOS版本之后，立即转安卓做下一个版本，
安卓做完转塞班，然后再转回做IOS。
这叫全天候手机开发团队。
他们喜欢在黑夜里通宵开发，
此时广州寂寥无人，
适合集中精力并行开发。
程序员三五成群，在工作区过道上低声讨论，
有的就地开始做俯卧撑，以提振精神。
有人把他们称为“矿工”，
因为他们总是在黑暗里工作，
而他们以这称号为傲。</p>

<p>微信在8个月里就横扫了整个市场，
比它炫的没它简单，
比它简单的没它快，
没有谁比它更快，
哪怕在GPRS下，微信也能把进度条轻易推到底。
万法归宗，唯快不破。
在各家拼单点功能的时候，
微信在11年下半年突然跳离主战场，
在LBS和视频通话上布下两粒棋子。
随即，在LBS上开发了“摇一摇”功能。
满城的“卡嚓”声响起，
无穷尽的寂寞之心终于有了简单的去处。
从Web SNS产品到移动互联网SNS产品，
张小龙第三跳只用了8个月。</p>

<p>在这八个月里，
微信从无人看好到炙手可热，
巨大的转变下让张小龙感觉到更多的是孤独。
在11年上半年的一个月时间内，
他曾经一篇篇仔细读过几乎所有业界对微信的评价。
读过一边倒认为微信无望的论调，
读过各种关于微信抄袭KIK和Talkbox的指责。
11年下半年，一起都逆转了过来。
张小龙依然沉默不语，
但是微信3.0的开机页面上放出了迈克尔.杰克逊的图片，
边上写了MJ的一句话：
&ldquo;你说我是错的,那你最好证明你是对的.&rdquo;
&ldquo;谨以此版本纪念迈克尔杰克逊，感谢他的音乐陪伴我们的产品开发之旅。“
同年11月，TalkBox放出了TXT和图片输入功能。
而此时，微信开始提供自定义透明背景头像、二维码名片，
开始试验时尚感对产品流行度的影响。</p>

<p>除了每周一次的网球，和每天深夜的音乐，
张小龙没有什么别的嗜好。
程序员时代的烟瘾一直保持了下来，
他是广州深夜里最大的Kent消费者，
沉默到像谜一样的男人，
中国为数不多具有文艺气质的产品经理。
他是那种因为喜欢《蓝莲花》歌词，
就一定要问许巍买下版权，
挂在QQ邮箱入口的人。
他也是那种喜欢同事小女儿涂鸦，
就把一幅涂鸦画和《蓝莲花》一样挂在QQ邮箱入口的人。</p>

<p>如果世界上又出现了什么新鲜的APP应用，
在发布后的48小时之内，
如果你也下载尝鲜，
可能你会遇到个名叫Allen的人，
如果这人沉默不语，甚至连头像都没有。
那么你也许已经遇见了张小龙。</p>

<p><strong>（以上内容纯属传说，不能对其真实性负责）</strong></p>

<p>补充材料：小龙喜欢车，但是早年买不起。一次去美国的时候，租了一辆。临走的前一晚，半夜醒来张小龙失踪了。原来，他舍不得告别那车，半夜开出去兜风了。—陈让回忆录《我所知道的张小龙》</p>
</div>
  
  


    </article>
  
  <ul class="pager">
    
    <li class="previous"><a href="/page/4/">&larr; Older</a></li>
    
    <li><a href="/blog/archives">Blog Archives</a></li>
    
    <li class="next"><a href="/page/2/">Newer &rarr;</a></li>
    
  </ul>
</div>
<aside class="sidebar-nav span3">
  
    <section class="well">
    <div class="profilepic align-center">
        <script src="/javascripts/md5.js"></script>
        <script type="text/javascript">
            $(function(){
                    $('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("sdqxcxh@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' class='img-rounded' />");
                    });
        </script>
    </div>
    <hr/>

    <ul id="about_me" class="nav nav-list">
        <li class="nav-header">About Me</li>
        <li>在帝都仰望星空大学计算机学院读了本科，后辗转五道口工程技术大学软件学院读研。诗书代码皆兴趣，文化科技均可聊。流量惨淡，感谢拍砖~~</li>
    </ul>
</section>
<section class="well">
    <ul id="profile" class="nav nav-list">
        <li class="nav-header">Profile</li>
        <li><a href="https://github.com/chenxiaohui/">GitHub</a></li>
        <li><a href="http://weibo.com/sdqxcxh/">Weibo</a></li>
        <li><a href="http://renren.com/sdqxcxh/">Renren</a></li>
        <li><a href="https://twitter.com/sdqxcxh/">Twitter</a></li>
        <li><a href="https://facebook.com/sdqxcxh/">Facebook</a></li>
    </ul>
</section>
<section class="well">
    <ul id="feeling" class="nav nav-list">
        <li class="nav-header">一点心情</li>
    </ul>
    <p></p>
    <img src="/images/common/yidaizongshi.jpg" class="img-polaroid" alt="世间所有的相遇，都是久别重逢" />
    <p></p>
    <p class="indent">
        世间所有的相遇，都是久别重逢
    </p>
    <p class="align-right">
        ——《一代宗师》
    </p>
</section>
<section class="well">
  <ul id="recent_posts" class="nav nav-list">
    <li class="nav-header">Recent Posts</li>
    
      <li class="post">
        <a href="/2013/10/12/svn-commit-failed/">关于svn commit fail的问题</a>
      </li>
    
      <li class="post">
        <a href="/2013/10/12/several-svn-problems/">几个svn的问题</a>
      </li>
    
      <li class="post">
        <a href="/2013/10/12/a-strange-error/">记几个诡异的bug</a>
      </li>
    
      <li class="post">
        <a href="/2013/10/11/post-review-conflict-under-git-svn/">post-review在svn和git共同存在下的冲突问题</a>
      </li>
    
      <li class="post">
        <a href="/2013/10/10/the-best-monitor-under-linux-htop/">霸气风骚的系统监视器htop</a>
      </li>
    
  </ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo" class="page-footer"><hr>
<p>
  Copyright &copy; 2013 - Harry Chen -
  <span class="credit">
      Powered by <a href="http://octopress.org">Octopress</a> /
                 <a href="http://getbootstrap.com/2.3.2/">Bootstrap</a> -
  </span>
  <span class="credit">Statistics 
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5674020'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s9.cnzz.com/stat.php%3Fid%3D5674020%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>

 </span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'harrychen';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>








<script type="text/javascript" >
<!--
    $(function() {
      $('pre').addClass('prettyprint').attr('style', 'overflow:auto');
      window.prettyPrint && prettyPrint();
});
-->
</script>


</body>
</html>
