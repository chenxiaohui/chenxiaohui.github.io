
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>CXH.ME</title>
  <meta name="author" content="Harry Chen">

  
  <meta name="description" content="北航本，清华硕，现就职于支付宝北京（北厂环球车间OceanBase生产线）">
  

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://cxh.me/page/6">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/bootstrap/bootstrap.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/stylesheets/bootstrap/responsive.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/libs/jquery.js"></script>
  <script src="/javascripts/libs/modernizr-2.0.js"></script>
  <script src="/javascripts/libs/bootstrap.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="CXH.ME" type="application/atom+xml">
  <link href="/javascripts/google-code-prettify/prettify.css" media="screen, projection" rel="stylesheet" type="text/css">
<script type="text/javascript" src="/javascripts/google-code-prettify/prettify.js"></script>
<link href="/stylesheets/doc.css" media="screen, projection" rel="stylesheet" type="text/css">

  

</head>



<body   >
  <nav role="navigation"><div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>

      <a class="brand" href="/">CXH.ME</a>

      <div class="nav-collapse">
        <ul class="nav">
    <li><a href="/">Blog</a></li>
    <li><a href="/blog/archives">Archives</a></li>
    <li class="divider-vertical"></li>
    <li class="dropdown">
        <a data-toggle="dropdown" class="dropdown-toggle" href="#">技术相关<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="/category/ruan-jian-fa-bu">软件发布</a></li>
            <li class="divider"></li>
            <li><a href="/category/c-plus-plus">C++</a></li>
            <li><a href="/category/dot-net">.Net</a></li>
            <li><a href="/category/flex">Flex</a></li>
            <li><a href="/category/ji-chu-li-lun">基础理论</a></li>
            <li><a href="/category/latex">Latex</a></li>
            <li><a href="/category/linux">Linux</a></li>
            <li><a href="/category/mfc">MFC</a></li>
            <li><a href="/category/oceanbase">Oceanbase</a></li>
            <li><a href="/category/others">其他</a></li>
            <li><a href="/category/php">PHP</a></li>
            <li><a href="/category/python">Python</a></li>
            <li><a href="/category/vim">vim</a></li>
            <li><a href="/category/web">web相关</a></li>
        </ul>
    </li>
    <li><a href="/category/ai-ti-ren-sheng">IT人生</a></li>
    <li><a href="/category/shi-qing-bai-tai">世情百态</a></li>
    <li><a href="/category/sui-bi">随笔</a></li>



</ul>


        <ul class="nav pull-right" data-subscription="rss">
          <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
          
        </ul>

        
          <form class="pull-right navbar-search" action="http://google.com/search" method="get">
            <fieldset role="search">
              <input type="hidden" name="q" value="site:cxh.me" />
              <input class="search-query" type="text" name="q" results="0" placeholder="Search"/>
            </fieldset>
          </form>
        
      </div>
    </div>
  </div>
</div>
</nav>
  <div class="container">
    <div class="row-fluid">
      <div class="span9">
  
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/05/05/can-not-debug-activex-plugin-in-ie8/">IE8无法调试ActiveX控件的问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-05-05T00:00:00+08:00" pubdate data-updated="true">May 5<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>最近调ActiveX控件，发现总是无法停到一个断点去，这不坑爹呢？</p>

<p>后来找来找去，发现IE8 默认是多进程工作的，通过修改注册表可以改为单进程工作，多进程的时候，启动的ie进程和加载要调试的ocx的ie进程不是一个进程，所以不能调试。</p>

<p>注册表操作如下：</p>

<blockquote><p>Windows Registry Editor Version 5.00
[HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer\Main]
&ldquo;TabProcGrowth&rdquo;=dword:00000000</p></blockquote>

<p>参考文献：</p>

<blockquote><p>[1] VC做的OCX控件，IE下断点调试问题,</p>

<p>[2] IE8调试VC6的OCX控件不能进入断点问题解决方法</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/04/10/plan-to-help-you-run/">助跑计划，几个有才版本</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-10T00:00:00+08:00" pubdate data-updated="true">Apr 10<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p><a href="mailto:webmaster@u148.net">webmaster@u148.net</a> ( 有意思吧 – 王二二 V5~! )</p>

<p>编者按：作为创新工场（由李开复创办于2009年9月，旨在帮助中国青年成功创业）一部分的“助跑计划”旨在甄选互联网、移动互联网和云计算领域里的创业新秀，通过一系列指导培训及孵化服务，帮助其快速开始创业。</p>

<p>下面的视频是“助跑计划”的宣传片，据说因专业配音人员太过正式不够给力（这也可能只是一个由头），于是向IT行业创业者征集配音。下面看看有才的网友们的作品吧…</p>

<p>日和版</p>

<p>国产7国语言版——中德英意韩日法</p>

<p>名人混搭版</p>

<p>天津话版</p>

<p>国产英文版</p>

<p>莫尔斯密码版</p>

<p>傻根版</p>

<p><a href="http://www.tudou.com/playlist/id/11543347/">这个豆单</a>还有更多</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/04/08/visualization-of-all-kinds-of-sort-algorithm/">各种排序算法的图形化演示</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-08T00:00:00+08:00" pubdate data-updated="true">Apr 8<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>一个日本哥哥写的各种排序算法的图形化演示，非常不错，推荐一下。</p>

<p>Your browser does not support iframes.</p>

<p>(ps:话说那个bogo算法到底在做甚么??)</p>

<p>还有之前一直很火的一个视频：排序算法的声音，一起欣赏一下吧~~</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/04/02/two-harvard-man-in-take-me-out/">《非诚勿扰》两位哈佛男&mdash;&mdash;陆宏毅&amp;安田剪辑对比。窥二人而知哈佛。</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-02T00:00:00+08:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>蛮值得深思的一个现象…</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/04/02/the-movie-legend-of-elegent-man/">ELLEMEN纪实影片《睿士传奇》完整版</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-04-02T00:00:00+08:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>这种纪实类的广告还是很有看头的。</p>

<p>风格很好，很淡定……</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/03/24/3d-web-game-war/">3d网页游戏市场大战</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-24T00:00:00+08:00" pubdate data-updated="true">Mar 24<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>Unity3D确实是一套非常优秀的3D游戏开发引擎，其网页3D游戏开发同样出色，但问题是，Unity3D的网页游戏运行的时候需要安装一个UnityWebPlayer，这个是最大的问题，极大的影响了用户的使用。而Adobe也已发布了最新的3D引擎MoleHill，一场网页3D的大战即将拉开。我们拭目以待。</p>

<p><img src="http://labs.adobe.com/technologies/flashplatformruntimes/incubator/features/images/zombietycoon.jpg" alt="Check out “Zombie Tycoon” by Frima Studios" /></p>

<p>大家可以顺便体验一下Adobe MoleHill的另一个Demo，效果超炫。</p>

<blockquote><p>参考文献：</p>

<p><a href="http://labs.adobe.com/technologies/flashplatformruntimes/incubator/features/images/zombietycoon.jpg">1</a>Adobe大战3D网页游戏市场,</p>

<p><a href="http://www.unity3d8.com/content/adobe%E5%A4%A7%E6%88%983d%E7%BD%91%E9%A1%B5%E6%B8%B8%E6%88%8F%E5%B8%82%E5%9C%BA">http://www.unity3d8.com/content/adobe大战3d网页游戏市场</a></p>

<p><a href="http://www.unity3d8.com/content/adobe%E5%A4%A7%E6%88%983d%E7%BD%91%E9%A1%B5%E6%B8%B8%E6%88%8F%E5%B8%82%E5%9C%BA">2</a> Unity3D在中小型网页游戏团队使用的困境,</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/03/24/3d-apis-for-adobe-flash-player-and-adobe-air/">3D APIs for Adobe Flash Player and Adobe AIR</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-24T00:00:00+08:00" pubdate data-updated="true">Mar 24<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>Adobe在2月27日举行的2011年Flash游戏峰会上发布了预览版MoleHill，支持3D全屏高清Flash游戏，这表明，我们离3D<a href="http://www.07073.com/">网页游戏</a>又近了一步。Adobe声称MoleHill将帮助游戏开发者制作60帧/秒的3D全屏高清Flash游戏。这个里程碑式的成功主要归功于Molehill的3D硬件加速支持团队。Flash游戏开发者已经开始蜂拥前往Adobe官网下载Molehill。</p>

<p>Molehill是Adobe官方将推出的一套底层3D渲染引擎，该引擎能够调用GPU，借助GPU强大的浮点运算能力实现开创新的Flash3D技术。使用Molehill和图形芯片则可以在60Hz左右的高分辨率显示器中全屏渲染近百万的Z缓冲三角形。这些新的3D API还将同时支持Flash Player和Adobe AIR，为用户提供全新的3D体验。</p>

<p>Adobe的Flash“平台天才”Mihai Coran表示“在预览版MoleHill可以以30帧/秒的速度渲染几千个非Z缓冲三角形。”</p>

<p>目前的预览版本只能在台式机上运行，Adobe表示正在努力为智能手机开发3D引擎。</p>

<p>Molehill项目是在去年10月开始的，Adobe承诺Molehill低等级的API硬件设备接口，将为3D引擎开发者提供良好的硬件加速灵活度。许多游戏开发者如Frima Studio已经开始使用Molehill制作3D游戏。</p>

<p>根据不同的操作系统，Molehill要依赖DirectX9或者OpenGL才能运行，而Molehill的API可以在ActionScript 3上下载。</p>

<p>Adobe的竞争对手Unity Technology在今天宣布了一个令人吃惊的消息——升级该公司的Unity引擎以支持Molehill的运行。</p>

<p>MoleHill升级版的发布日期尚未公布。</p>

<p>以上文字转载自Howe的博客。</p>

<p>[2]是Adobe官网的关于MoleHill的一个展示，[3]是对此的翻译，从效果看真是非常炫，你可以在这里（）体验一下，当然需要装新的Adobe Flash Player11。</p>

<blockquote><p>参考文献：</p>

<p><a href="http://www.07073.com/">1</a> Adobe发布预览版Flash3D引擎MoleHill，</p>

<p>[2] 3D APIs for Adobe Flash Player and Adobe AIR,</p>

<p>[3] Molehill 3D APIs － GPU硬件加速的Flash 3D API,</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/03/22/that-spring-festival-ceremony/">那一年的春晚</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-22T00:00:00+08:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<blockquote><p>也许，越来越多的人选择不看春晚，也许更多的人在回忆过去的春晚，回忆那年的除夕。</p>

<p>那年，我们的年夜饭还没有现在丰盛，我们会全家人围坐在桌前，一起看春晚；那年，没有别的选择，我们会让电视节目停留在中央一套；那年，春晚的舞台还很简陋，我们的笑容是发自内心的；那年，我们没有那么多娱乐，我们拥有更多的快乐；那年，我们并不富裕，我们每年都回家过年。
也许，我们怀念的并不仅仅是春晚，还有那些永远都回不去的记忆中的美好过去。</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/03/22/implement-of-regular-expression-matcher/">正则表达式匹配器的实现</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-22T00:00:00+08:00" pubdate data-updated="true">Mar 22<span>nd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>这里实现了一个正则文法匹配器。其中正则文法是使用正则表达式实现的。正则表达式是我们平时经常使用的一种文法工具，各种编程工具里都有正则表达式的匹配器。Linux下的Grep工具也是一种正则文法的匹配器实现。</p>

<p>我们这里给出正则文法的形式定义</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/03/wenfa_thumb.jpg" title="wenfa" alt="wenfa" /> 这个定义是有二义的，消除二义之后的定义形式如下所示：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/03/wefa1_thumb.jpg" title="wefa1" alt="wefa1" /> 算法的基本思路如下所示：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/03/suanfa_thumb.png" title="suanfa" alt="suanfa" /> 类图如下所示：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/03/sdf_thumb.jpg" title="sdf" alt="sdf" /> 另，为了效果能更友好，使用了Latex的几个宏包，无法打包进代码里，所以想要运行请安装CTex套装，代码在CTex2.5以上版本运行通过。</p>

<p>文档和可执行文件<a href="http://www.roybit.com/wp-content/uploads/2011/03/%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E6%A1%A3.rar">这里</a>下载，代码<a href="http://www.roybit.com/wp-content/uploads/2011/03/%E4%BB%A3%E7%A0%81.rar">这里</a>下载。</p>

<blockquote><p>参考文献:</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2011/03/wenfa_thumb.jpg" title="wenfa">1</a> John E. Hopcroft, Rajeev Motwani, Jeffrey D. Ullman，Introduction to Automata Theory, Languages, and Computation[M]，2nd Edition. Addison Wesley Press, November 24, 2000.</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2011/03/wefa1_thumb.jpg" title="wefa1">2</a> 罗贵明，自动机与形式逻辑课件[EB/OL]，清华大学软件学院，2010。</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2011/03/suanfa_thumb.png" title="suanfa">3</a> 高仲仪，金茂忠，编译原理及编译程序构造[M]，北京航空航天大学出版社，1990-12。</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2011/03/sdf_thumb.jpg" title="sdf">4</a> Alfred V.Aho, Monica S.Lam, Ravi Sethi, Jeffrey D.Ullman, Compilers: Principles, Techniques, and Tools (2nd Edition)[M]，Addison Wesley Press,2009-1.</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2011/03/%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E6%A1%A3.rar">5</a> The TikZ and PGF manual, Example: State machine[EB/OL],  ,2006-11-08</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2011/03/%E4%BB%A3%E7%A0%81.rar">6</a> 如何将正则表达式转化为自动机[EB/OL]，.</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/03/20/super-imaginary/">超现实的想象力</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-20T00:00:00+08:00" pubdate data-updated="true">Mar 20<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>这个 <a href="http://www.ipc.me/batelco-infinity.html">Infinity</a> 广告，用无比意识流的方式，超多华丽的特效镜头，堆叠出一个视觉狂想曲。当你的眼球被惊得一塌糊涂时，恐怕很容易喜欢它了吧。整个广告都非常好莱坞<a href="http://www.ipc.me/batelco-infinity%20.html">科幻大片</a>风范，恢弘又淡定的画面，效果超级拉风啊！</p>

<p>以下是制作花絮：</p>

<blockquote><p>转载自：<a href="http://www.ipc.me/batelco-infinity.html">超现实的想象力！媲美科幻大片的超级特效华丽广告 Infinity！ (Batelco电信)</a>,</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/03/20/sea-how-chinese-people-do-not-fear-nuclear-pollution/">看看当年中国人民是如何不惧核污染的</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-20T00:00:00+08:00" pubdate data-updated="true">Mar 20<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>看看是够霸气的，大概是想演练一下核攻击背景下的对敌突击。不过明显有两个问题：</p>

<blockquote><ol>
<li> 跟原子弹爆炸的破坏力比，这点突击的作用已经几乎可以忽略了。</li>
<li> 这不是拿士兵的生命开玩笑么。</li>
</ol></blockquote>


<p>总而言之，这是毛时代精神原子弹的典型表现了。</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/03/18/funny-ice-age/">日和版《冰河世纪》</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-18T00:00:00+08:00" pubdate data-updated="true">Mar 18<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>这笑声挺带感啊。</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/03/18/first-person-Mario/">第一人称马里奥[v]</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-18T00:00:00+08:00" pubdate data-updated="true">Mar 18<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>技术宅Freddiew这次带来的不是真人版，而是高质量的FPS版超级马里奥视频。以次世代的画面和界面（还有成就系统）展示玩家们耳熟能详的马里奥第一关。</p>

<p>心生膜拜啊。</p>

<blockquote><p>本文转载自：煎蛋，<a href="http://jandan.net/2011/03/18/%E7%AC%AC%E4%B8%80%E4%BA%BA%E7%A7%B0%E9%A9%AC%E9%87%8C%E5%A5%A5v.html">http://jandan.net/2011/03/18/第一人称马里奥v.html</a></p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/03/17/liuyu-a-man-is-like-a-force/">刘瑜 《一个人要像一支队伍》</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-17T00:00:00+08:00" pubdate data-updated="true">Mar 17<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/03/b_large_GikE_789a00017a095c43_thumb.jpg" title="b_large_GikE_789a00017a095c43" alt="b_large_GikE_789a00017a095c43" /></p>

<p>前两天有个网友给我写信，问我如何克服寂寞。</p>

<p>她跟我刚来美国的时候一样，英文不够好，朋友少，一个人等着天亮，一个人等着天黑。“每天学校、家、图书馆、gym、几点一线”。</p>

<p>我说我没什么好办法，因为我从来就没有克服过这个问题。这些年来我学会的，就是适应它。适应孤独，就像适应一种残疾。</p>

<p>快乐这件事，有很多“不以主观意志为转移”的因素。基因、经历、你恰好碰上的人。但是充实，是可以自力更生的。罗素说他生活的三大动力是对知识的追求、对爱的渴望、对苦难的怜悯。你看，这三项里面，除了第二项，其他两项都是可以自给自足的，都具有耕耘收获的对称性。</p>

<p>我的快乐很少，当然我也不痛苦。主要是生活稀薄，事件密度非常低，就说昨天一天我都干了什么吧：</p>

<p>10点，起床，收拾收拾，把看了一大半的关于明史的书看完。</p>

<p>下午1点，出门，找个coffeeshop,从里面随便买点东西当午饭，然后坐那改一篇论文。期间凝视窗外的纷飞大雪，花半小时创作梨花体诗歌一首。</p>

<p>晚上7点，回家，动手做了点饭吃，看了一个来小时的电视，回e-mail若干。</p>

<p>10点，看了一张DVD,韩国电影“春夏秋冬春”。</p>

<p>12点，读关于冷战的书两章。</p>

<p>凌晨2点，跟某同学通电话，上网溜达，准备睡觉。</p>

<p>这基本是我典型的一天：一个人。书、电脑、DVD。</p>

<p>一个星期平均会去学校听两次讲座。工作日平均会跟朋友吃午饭一次，周末吃晚饭一次。</p>

<p>多么稀薄的生活啊，谁跟我接近了都有高原反应。</p>

<p>孤独的滋味当然不好受，更糟的是孤独具有一种累加效应。同样重要的东西，你第一分钟举着它和第五个小时举着它，感受当然不同。孤独也是这样，偶尔偷得半日闲自己去看一场电影，和一年、两年、三年、五年只能自己和自己喝啤酒，后果当然完全不同。我以前跟一位曾经因为某政治事件而坐过牢的朋友聊天，他描述那几年被单独关押的生活，这样形容：度日如年，度年如日。说得可真确切。</p>

<p>我曾在日记里大言不惭地写道：出于责任感，我承担了全世界的孤独。我的意思是，我不但孤独，而且我的孤独品种繁多、形态各异：在女人堆里太男人，在男人堆里太女人；在学者里面太老粗，在老粗里面太学者；在文青里面太愤青，在愤青里面太文青；在中国人里面太西化，在外国人里面太中国….我觉得上帝把我派到人间，很可能是为了做一个认同紊乱的心理实验。</p>

<p>我其实并不孤僻，简直可以说开朗活泼。但大多时候我很懒，懒得经营一个关系。还有一些时候，就是爱自由，觉得任何一种关系都会束缚自己。当然最主要的，还是知音难觅。我老觉得自己跟大多数人交往，总是只能拿出自己的一个维度，很难找到和自己一样兴趣一望无际的人。这句话的谦虚版说法是：很难找到一个像我一样神经错乱的人。</p>

<p>有时候也着急。我有有幸生活在“十一届三中全会”之后，没有吃过多少苦，但是在我所经历过的痛苦中，没有什么比孤独更具有破坏力。这不仅仅是因为错过了亲友之间的饭局谈笑温情，不仅仅是因为一个文学女青年对故事、冲突、枝繁叶茂的生活有天然的向往，还因为一个人思想总是需要通过碰撞来保持。长期的孤单中，就像一个圆点脱离了坐标系，有时候你不知道自己思考的问题是否真的成其为问题，你时常看不到自己的想法中那个旁人一眼就可以看出的巨大漏洞，你不知道什么是大，因为不能看到别人的小，你不知道什么是白，因为不能看到别人的黑。总之你会担心，老这样一个人呆着，会不会越来越傻？</p>

<p>好像的确是越来越傻。</p>

<p>但另一些时候，又惊咤于人的生命力。在这样缺乏沟通、交流、刺激、辩论、玩笑、聊天、绯闻、传闻、小道消息、八卦、MSN…的生活里，没有任何圈子，多年来仅仅凭着自己跟自己对话，我也坚持了思考，保持了表达欲，还能写小说政论论文博客，可见要把一个人意志的皮筋给撑断，也没有那么容易。</p>

<p>“忍受的极限会是什么养的结果？”</p>

<p>让我告诉你，忍受是没有极限的。</p>

<p>年少的时候，我觉得孤单是很酷的一件事情。长大以后，我觉得孤单是很凄凉的一件事。现在，我觉得孤单不是一件事。至少，努力不让它成为一件事。</p>

<p>有时候，人所需要的是真正的绝望。</p>

<p>真正的绝望跟痛苦、悲伤没有什么关系。它让人心平气和，让你意识到你不能依靠别人，任何人，得到快乐。它让你谦卑，因为所有别人能带给你的，都成了惊喜。它让你只能返回自己的内心。每个人的内心都有不同的自我，他们彼此可以对话。你还可以学习观察微小事物的变化，天气、季节、超市里的蔬菜价格、街上漂亮的小孩，你知道，万事万物都有它值得探究的秘密，只要你真正-我是说真正-打量它。</p>

<p>当然还有书、报纸、电影电视、网络、DVD、CD，那里面有他人的生活、关于这个世界的道理、音乐的美、知识的魔术、爱的可能性、令人愤怒的政治家…我们九九八十一生都不可能穷尽这些道理、美、爱、魔术的一个小指甲盖，怎么还能抱怨生活给予我们的太少。</p>

<p>绝望不是气馁，它只是“命运的归命运，自己的归自己”这样一种事实求是的态度。</p>

<p>就是说，它是自由。</p>

<p>以前一个朋友写过一首诗，叫《一个人要像一支队伍》。我想象文革中的顾准、狱中的杨小凯、在文学圈之外写作的王小波，就是这样的人。怀才不遇，逆水行舟，一个人就像一支队伍，对着自己的头脑和心灵招兵买马，不气馁，有召唤，爱自由。</p>

<p>我想自己终究是幸运的，不仅仅因为那些外在的所得，而且因为我还挺结实的。总是被打得七零八落，但总还能在上帝他老人家数到“九”之前重新站起来，再看到眼前那个大海时，还是一样兴奋，欢天喜地地跳进去。在辽阔的世界面前，一个人有多谦卑，他就会有多快乐。当罗素说知识、爱、同情心是他生活的动力时，我觉得简直可以和这个风流成性的老不死称兄道弟。</p>

<p>因为这种幸运，我原谅自己经受的挫折、孤单、原谅自己的敏感、焦虑和神经质，原谅上帝他老人家让X不喜欢我，让我不喜欢Y，让那么多人长得比我美，或者比我智慧，原谅他让我变老变胖。因为他把世界上最美好的品质给了我：不气馁，有召唤，爱自由。</p>

<p>如果你还在为自己孤单寂寞怀才不遇举世皆浊我独醒而深深叹息的话，那么让我告诉你，你买不到那个彩票的，别再把你时间的积蓄两块、两块地花出去，回到你的内心，寻找你自己，与心灵深处的他、他们一起出发去旅行。如果你有足够的好奇心，你可以足不出户而周游世界，身无分文而腰缠万贯。人生若有知己相伴固然妙不可言，但那可遇而不可求，真的，也许既不可遇又不可求，可求的只有你自己，你要俯下身去，朝着幽暗深处的自己伸出手去。</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/03/16/a-gorgeous-vista-like-calendar-control/">发一套华丽的Vista风格日历控件</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-16T00:00:00+08:00" pubdate data-updated="true">Mar 16<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>最近需要用一套可编辑的日历控件，ASP.NET里的日历控件是可用的，但是WinForm下的日历控件无法编辑。没时间写，就直接上网找了个控件修改了一下。其实这控件严格说不能叫日历……这明明是月份牌，实际上就是在一张底图上写上一些日期文字而已。主要的改动是加了一些接口，然后写了部分自动生成的代码，可以直接把一个月的日历显示上去。勉强可用，不过总觉得有点山寨。不说了，上图（打牌这部分纯属吐槽，请勿随意联系）。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/03/thumb.png" title="无标题" alt="无标题" /></p>

<p>代码<a href="http://www.roybit.com/wp-content/uploads/2011/03/VistaCalendar.rar">这里</a>下载。</p>

<p>参考文献：</p>

<blockquote><p>Vista风格日历控件C#版，</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/03/08/two-methods-to-deal-with-config-file-using-csharp/">C#配置文件读写的两种思路</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-08T00:00:00+08:00" pubdate data-updated="true">Mar 8<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>配置文件是增加软件扩展性不可获取的一部分。本文提供两种C#配置文件读写的方式。</p>

<p>第一种是使用Windows自身的INI文件读写API，在.NET下调用的时候需要对其进行声明，这也是最传统的一类，问题在于INI文件表达能力有限，每次都要费心地去给每个不同的配置项设置不同的KEY，不适合LIST型的配置项的书写。</p>

<p>另一种是使用XML序列化与反序列化。这里只是用XML作为一个例子，其实.NET下的几种序列化方式<a href="http://www.roybit.com/wp-content/uploads/2011/03/TestConfig.rar">1</a>都可以用来作为配置文件读写的一种方式。XML的表达能力强于INI文件，同时序列化方式也大大简化了配置文件读写的过程，确是一种方便的工具。</p>

<p>详见<a href="http://www.roybit.com/wp-content/uploads/2011/03/TestConfig.rar">代码</a>。</p>

<p>参考文献：</p>

<blockquote><p><a href="http://www.roybit.com/wp-content/uploads/2011/03/TestConfig.rar">1</a>C#序列化技术详解（转），</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/02/25/about-swallowing-the-bulb/">关于吞灯泡问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-25T00:00:00+08:00" pubdate data-updated="true">Feb 25<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>之前网上有一个很火的帖子，关于为什么不能吞灯泡的问题[1]，还有很多被好奇心害死娃们前仆后继的证明并跟帖[2]。不过最近果壳传出一个视频辟谣，看结果貌似吞灯泡没神马大不了的。</p>

<p>PS:这位哥哥真是很有献身精神和娱乐精神啊。</p>

<p>视频1 吞宝剑吞铁球算个毛，真的猛士敢于吞灯泡</p>

<p>参考文献：</p>

<blockquote><p>[1] 为什么不能吞灯泡（好奇心太强者慎入），</p>

<p>[2] 为什么不能吞灯泡(亮点在下面的跟帖)，</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/02/24/multi-table-operation-with-local-cache/">基于本地缓存的多表级联操作的实现（C#）</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-24T00:00:00+08:00" pubdate data-updated="true">Feb 24<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>背景：数据库操作中我们经常会遇到级联修改的问题，在之前的一篇文章<a href="http://www.roybit.com/wp-content/uploads/2011/02/thumb1.png" title="视图结构">1</a>里我们探讨了多表级联的一种实现方式，这篇文章我们将探讨另一种实现方式，即通过本地缓存的方式，避免不必要的存储过程。</p>

<p>定义：</p>

<blockquote><p>事实表：中央表，它包含联系事实与维度表的数字度量值和键。简单说，事实表包括各个维度的ID。</p>

<p>维表：述事实数据表中的数据。维度表包含创建维度所基于的数据。</p></blockquote>

<p>首先，我们的条件是，级联不是很复杂，存在一张事实表和若干维表，通过单ID将事实表和维表进行级联。思路是：首先本地缓存维表的所有数据，然后将事实表的数据绑定到DataGridView上，将ID列设置为DataGridViewComboBoxColumn，绑定相应的维表，指定值字段和显示字段，让结果自动对应。</p>

<p>举个简单的例子：订单数据库，包含Customers，Products和Orders三个表，之间的逻辑关系如图1所示：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/02/thumb1.png" title="视图结构" alt="视图结构" />图1 数据库表结构关系</p>

<p>程序运行截图如图2所示：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/02/thumb2.png" title="程序" alt="程序" /></p>

<p>图2 程序运行截图</p>

<p>具体的见<a href="http://www.roybit.com/wp-content/uploads/2011/02/testDataUpdate.rar">代码</a>，不再赘述。</p>

<p>参考文献：</p>

<blockquote><p><a href="http://www.roybit.com/wp-content/uploads/2011/02/thumb1.png" title="视图结构">1</a> 多表级联增删查改操作的实现，</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/02/24/message-box-like-qq-or-msn/">仿QQ、MSN消息提示窗口的实现（C#）</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-24T00:00:00+08:00" pubdate data-updated="true">Feb 24<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>前言：我们在QQ、MSN、飞信等即时通信软件中经常看到消息弹出提示，即屏幕右下角弹出一个消息提示框，然后过一段时间隐去（有时候也不隐去，比如一个艰难的决定）。这种提示方式在消息通信中比弹MessageBox更符合用户习惯，前者往往阻碍用户正常操作。我们尝试在.Net下模拟这种方式。</p>

<p>坦白的说核心代码是某位大牛（John O’Byrne）写的，另一位大牛Patrick Vanden Driessche 修改了部分代码，我在此基础上增加了对多弹框的支持，文后附了原代码和我修改之后的代码。</p>

<p>多弹框的实现部分主要写了一个PlaceManager类每次从0下标开始检测哪个位置可用，然后在这个位置弹出消息提示框，消息提示框隐掉之后再回收这个位置。</p>

<p>考虑到同时弹出两个及两个以上框的几率非常小，同时建立TaskbarNotifier窗口的过程资源消耗较多，程序里默认建立了一个TaskbarNotifier的对象，每次检测如果这个对象没有被使用则直接填入标题和内容并弹出，否则新建一个TaskbarNotifier对象再弹出。没有做使用概率的分析，大家如果觉得一个不够用可以默认多建立几个。</p>

<p>Demo里弹出消息提示框是在界面线程里，如果不是界面线程则会有问题，即使取消了CheckForIllegalCrossThreadCalls依然不行，这时需要在界面类里添加代理方法，使用代理方法弹出消息，具体代码如下所示，这问题也困扰了我好久：</p>

<pre><code>delegate void PromptMessage(string message);
public void Msg(string message)
{
    PromptMessage call = new PromptMessage(PromptMsg);
    this.Invoke(call, new object[] { message });
}
</code></pre>

<p>程序界面如图1所示：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/02/thumb3.png" title="未命名" alt="未命名" /> 图2 程序界面</p>

<p>点击<a href="http://www.roybit.com/wp-content/uploads/2011/02/TaskbarNotifier.rar">这里</a>下载源程序代码，<a href="http://www.roybit.com/wp-content/uploads/2011/02/TestQQNotify.rar">这里</a>下载我添加了多窗口提示后的代码。</p>

<p>参考文献：</p>

<blockquote><p><a href="http://www.roybit.com/wp-content/uploads/2011/02/thumb3.png" title="未命名">1</a> TaskbarNotifier代码，Created by John O’Byrne，2002-12-2，Modified by Patrick Vanden Driessche ，2003-1-11</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/02/23/analysis-on-an-error-message-of-breaking-the-rule-of-concurrency/">&ldquo;违反并发性: UpdateCommand 影响了预期1条记录中的0条&rdquo;原因分析</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-23T00:00:00+08:00" pubdate data-updated="true">Feb 23<span>rd</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>该问题出现在使用DataAdapter自动对DataTable(或DataSet)进行更新的时候，具体情形是：通过界面添加了一条记录，然后调用DataAdapter的Update方法更新了数据，之后又修改或删除了这条记录。</p>

<p>原因网上有很多说法，大部分的分析我感觉是扯淡，其实主要的原因是自增长字段的值没有跟数据库同步<a href="http://www.roybit.com/wp-content/uploads/2011/02/UpdateID.rar">1</a>，即前台的记录里添加了一条记录，但是程序不知道自增长的ID字段应该填充多少，用户也不可能指定这个ID，更新了之后数据库自动填充了自增长ID，但是前台对应的DataTable(或DataSet)里却没有同步更新，从而导致DataAdapter不知道根据什么字段来定位修改的记录，因而出错。</p>

<p>具体的解决方法参考<a href="http://www.roybit.com/wp-content/uploads/2011/02/UpdateID.rar">1</a>一文中给出了一种方法，即每次插入记录的时候去服务器查询自增长种子值，然后把结果放到DataTable对应自增长ID列的AutoIncrementSeed属性里，主要的问题有如下两点：</p>

<blockquote><ol>
<li> 我不知道怎么获取……SQLServer里可以用DBCC CheckIdent([User],NoReseed)语句，但是这个语句在代码里貌似是不返回结果的。</li>
<li> 如果两个用户同时操作，比如A添加了一条记录未提交，B也添加了一条记录，这时两个用户的AutoIncrementSeed是一样的，之后也会存在更新的并发问题。</li>
</ol></blockquote>


<p>其实最简单的解决方法就是每次更新之后把新的记录返回一下，替换当前DataTable，问题不就解决了么。参见<a href="http://www.roybit.com/wp-content/uploads/2011/02/UpdateID.rar">代码</a></p>

<p>参考文献：</p>

<blockquote><p><a href="http://www.roybit.com/wp-content/uploads/2011/02/UpdateID.rar">1</a> Access自动编号 违反并发性原因解析,</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/02/19/tecent-advertisement/">关于腾讯12年品牌广告</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-19T00:00:00+08:00" pubdate data-updated="true">Feb 19<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>据说是春晚前的一个广告，拍的挺感人的。腾讯开始走温情路线了，尤其瞄准了老爸老妈这一辈人。不过不得不说还真是挺有效果。</p>

<p>罗永浩（或者是周云蓬）说过：我们这些在外打拼的人，一点点的成绩在父母那里都会被无限的夸大。其实不只是成绩，父母眼里跟我们任何相关的事情都会变得无限重要，虽然这在我们自己看来只是小事。</p>

<p>父母曾经何等意气风发，现在却已两鬓斑白，这事情想起来就心酸。 二十年光阴，想想真不知道是怎么过来的。时间就是如此无情，你意识到沧桑的时候，光阴早已将过往带到记忆里去了，无可挽回。</p>

<p>珍重万千啊。</p>

<p>顺便附一个太平洋保险的广告，温情路线，甚为感人。背景音乐是李健的《爱的四季》。</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/02/16/funny-poems-of-zhangzongchang/">张宗昌的搞笑诗</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-16T00:00:00+08:00" pubdate data-updated="true">Feb 16<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>来源：<a href="http://www.tianya.cn/techforum/content/14/1/784232.shtml">天涯</a></p>

<p>张宗昌，字效坤，山东掖县人，土匪出身，身高1.85米，生得五大三粗却性情刁钻。适逢民国改朝换代，他舞枪弄棒、打家劫舍，拉队伍、抢地盘，侥幸混得一席之地。1925年任山东督办，横征暴敛，贩卖鸦片、勾结日本，成了北洋军阀当中声名最劣的一个，被当作是祸国殃民的军阀样本。</p>

<p>张宗昌有个“狗肉将军”的“美名”，还有一个外号叫“三不知将军”，据鲁迅所说，这三不知是指他不知道自己有多少钱，不知道自己有多少兵，不知道自己有多少姨太太，也就是说他兵多、钱多、女人多，多得他自己也数不清。</p>

<p>张宗昌本人大字不识一斗，却喜欢附庸风雅，主政山东时向清末状元王寿彭学习写诗，还正儿八经地出版了一本《效坤诗钞》。很多人嘲笑张宗昌的诗不像诗，但若要论影响，张宗昌的诗却比当时许多喝了一肚子墨水的诗家写的诗要大得多，并且有诗流传后世。</p>

<p>《效坤诗钞》中张宗昌的几首诗：</p>

<p>《俺也写个大风歌》：“大炮开兮轰他娘，威加海内兮回家乡。数英雄兮张宗昌，安得巨鲸兮吞扶桑。”（模仿刘邦的《大风歌》“大风起兮云飞扬，威加海内兮归故乡，安得猛士兮守四方”）</p>

<p>《笑刘邦》：听说项羽力拔山，吓得刘邦就要窜。不是俺家小张良，奶奶早已回沛县。（奶奶是骂人话）</p>

<p>《天上闪电》：“忽见天上一火链，好像玉皇要抽烟。如果玉皇不抽烟，为何又是一火链？！”（他是个烟鬼，一天到晚，烟不离手，因此才有如此奇特的想象，以为玉皇大帝也像他一样总在抽烟）</p>

<p>《游蓬莱阁》：“好个蓬莱阁，他妈真不错。神仙能到的，俺也坐一坐。靠窗摆下酒，对海唱高歌。来来猜几拳，舅子怕喝多！”（有权有势即神仙，但显然和他同游蓬莱阁的舅子权势不大，仙气不够，酒量也小）</p>

<p>《大明湖》：“大明湖，明湖大，大明湖里有荷花。荷花上面有蛤蟆，一戳一蹦达。”（他对大明湖的大好景色熟视无睹，却像一个玩童，唯独对湖里的蛤蟆感兴趣，蛤蟆成了他这个大玩童眼中大明湖的象征）</p>

<p>《趵突泉》：“趵突泉，泉趵突，三股水，光咕嘟，咕嘟咕嘟光咕嘟！”</p>

<p>《泰山》：“远看泰山黑糊糊，上头细来下头粗。如把泰山倒过来，下头细来上头粗。”</p>

<p>张宗昌的诗为什么在当时影响大，并且还能流传后世呢？除了他是军阀名人之外，更重要的原因，恐怕是他的诗匪气十足，非常另类，幽默感特强，有喜剧效果，让你不乐都不行。</p>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/02/16/curd-operation-of-multi-table/">多表级联增删查改操作的实现（C#）</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-16T00:00:00+08:00" pubdate data-updated="true">Feb 16<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>本文背景：</p>

<p>我们经常会遇到这样的问题：从数据库里通过几个表级联查询数据，然后显示到界面上，用户修改了这些级联之后的数据后，如何将数据更新到数据库里去？我们查询的时候完全可以使用视图，但是视图不支持增删查操作。如何实现视图的可更新呢？</p>

<p>本文的实现主要采用了.Net DataTable(和DataSet)，使用DataAdapter可更新数据的特性，底层通过存储过程更新数据。逻辑结构如图1所示：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/02/thumb.jpg" title="未命名" alt="未命名" /></p>

<p>图 1 逻辑结构</p>

<p>基本的想法是：</p>

<ul>
<li>通过视图进行数据的查询操作，而且这样可以通过SQLServer等工具自动生成视图。</li>
<li>删除，插入和修改分别实现存储过程（或Sql语句），然后构建DataAdapter，将DataAdapter的InsertCommand,UpdateCommand,SelectCommand,DeleteCommand分别置为之前的四种操作。</li>
<li>通过DataAdapter的Update操作更新DataTable（或DataSet）</li>
</ul>


<p>举一个简单的例子，目前有四个数据库，之间的关系如图2所示，其中Orders（订单）通过Order_id与Customers（客户）表关联，OrderDetails（订单细节）通过ProductID与Products（商品）表关联，Orders与OrderDetails明显冗余了（一对一），中间做的时候改动了不少东西，所以到最后成了这个样子，算了，懒得改了：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/02/2_thumb.jpg" title="未2命名" alt="未2命名" /></p>

<p>图2 数据库各个表之间的关系</p>

<p>类图如图3所示，主要是一个数据库连接类，一个表操作基类和两个派生类。派生类主要是覆盖基类方法并填写DataAdapter的四个Command，其中InsertCommand是必须填写的，如果只涉及一个表的操作的话，那么其他三个Command可以用CommandBuilder自动构造：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/02/testData_thumb.jpg" title="testData" alt="testData" /> 图3 类图</p>

<p>数据库里的操作主要是写存储过程和创建视图，如图4所示：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/02/thumb.png" title="数据库" alt="数据库" /> 图4 数据库里的操作</p>

<p>程序执行的截图如图5所示：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/02/ui_thumb.png" title="ui" alt="ui" /> 具体的详见<a href="http://www.roybit.com/wp-content/uploads/2011/02/testData.rar">代码</a>，请自行修改连接字符串。</p>

<p>参考文献：</p>

<blockquote><p><a href="http://www.roybit.com/wp-content/uploads/2011/02/thumb.jpg" title="未命名">1</a> SQLServer 存储过程简介与使用方法，</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2011/02/2_thumb.jpg" title="未2命名">2</a> 使用DataSet更新数据库的两种方式，</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/02/04/improvement-on-tcp-subpackage-mechanism-implement/">对&ldquo;基于长度和定界符带校验的TCP分包方式&rdquo;的一些改进</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-02-04T00:00:00+08:00" pubdate data-updated="true">Feb 4<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>“长度、分隔符加校验的TCP分包设计(C#)”<a href="http://www.roybit.com/wp-content/uploads/2011/02/Client.cs">1</a>一文提出了一种综合长度和特殊字符定界两种TCP分包方式的新的分包方式，原文给出的实现没有考虑长度字符被分开两次传播的情况，同时原算法没有明确的算法描述，基于多种情况的综合，容易遗漏，这里给出改进后的算法：</p>

<blockquote><ol>
<li> 如果WaitForLength置位，则拼上原来的字段，凑齐长度字段信息。</li>
<li> 如果LeftLength不为0，则判断剩余缓冲区是否包含了报文剩余部分，如果包含则拼合字段，判断结尾是不是结束定界符>，否则拼合剩余缓冲区，LeftLength更新。</li>
<li> 找到一个开始定界符，否则拼合剩余缓冲区，等待下次数据到达。</li>
</ol></blockquote>


<p>总的来说，就是通过开始定界符标定一个报文的开始，通过长度字段得到报文的结尾位置，通过结尾位置是不是结束定界符>判断一个报文是不是完整，如不完整则继续找寻下个开始定界符。</p>

<p>报文的正确新校验仍通过C#的反序列化机制。源码只更新了<a href="http://www.roybit.com/wp-content/uploads/2011/02/Client.cs">Client.cs</a>，测试代码如下：</p>

<pre><code>byte[] buffer1 = new byte[] { 60, 0, 0, 0, 10, 44, 43, 43, 43, 43, 44, 62, };//第一个报文
byte[] buffer2 = new byte[] { 60, 0, 0, };//第二个报文
byte[] buffer3 = new byte[] { 0, 7, 43, 43, 43, 62, 60, 0, 0, 0, 10, 44, 45, 45, 45, 45, 44, 62 };//第三个报文

//第一个报文
Array.Copy(buffer1, 0, client.m_receiveBuffer, 0, buffer1.Length);//拷贝到接收缓冲区
client.ResolveSessionBuffer(buffer1.Length);
Array.Clear(client.m_receiveBuffer,0,client.m_receiveBuffer.Length);

//第二个报文
Array.Copy(buffer2, 0, client.m_receiveBuffer, 3, buffer2.Length);//拷贝到接受缓冲区
client.ResolveSessionBuffer(buffer2.Length);
Array.Clear(client.m_receiveBuffer, 0, client.m_receiveBuffer.Length);

//第三个报文
Array.Copy(buffer3, 0, client.m_receiveBuffer, 3, buffer3.Length);//拷贝到接收缓冲区
client.ResolveSessionBuffer(buffer3.Length);
Array.Clear(client.m_receiveBuffer, 0, client.m_receiveBuffer.Length);
</code></pre>

<p>参考文献：</p>

<blockquote><p><a href="http://www.roybit.com/wp-content/uploads/2011/02/Client.cs">1</a> 长度、分隔符加校验的TCP分包设计(C#)，</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/01/30/tcp-subpackage-design-with-length-separator-and-veryfication/">长度、分隔符加校验的TCP分包设计(C#)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-30T00:00:00+08:00" pubdate data-updated="true">Jan 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>我们做TCP程序的时候最经常遇到的问题就是分包，这也是激动人心的程序开发（可能你不这么认为）中最不激动人心的一部分，换句话说，确实挺枯燥的。</p>

<p>这里简要说一下分包问题的来源吧，毕竟有人并没做过TCP。TCP或者说流式套接字都会面临一个同样的问题，就是逻辑上我们会引入报文或包的概念，通过报文传播消息，但是基于流的套接字不会在套接字层区分这个概念。传递来传递去的东西永远是一串串的char（抑或byte），不会有人告诉你从一个报文是从哪里开始到哪里结束，而且一个报文可能被拆成两部分传递。所以，我们要分包。</p>

<p>分包其实是个挺常见的问题，从Socket到串口，只要做流式套接字，都要在底层实现一个分包机制，然后给上层一个接口，实现对底层的透明。大体有如下两种常见的方式</p>

<blockquote><ol>
<li> 特殊字符做分界符：比如，之间的认为是一个完整报文。</li>
<li> 长度前缀：在报文前加一个长度信息，指明报文的长度。</li>
</ol></blockquote>


<p>两种方式的利弊如下表：</p>

<p>方式
利
弊</p>

<p>特殊字符
如果有错位或丢失，不影响下一个报文
报文内容里不能出现分界符，否则要做相应的置换</p>

<p>长度前缀
报文内容无关，可以出现任何字符
假如有错位或丢失，以后的报文都会找不到长度信息位置</p>

<p>这里稍作说明，关于分界符的置换，大概的做法是：假如分界符是#，正文里出现的#都置换成##，然后按照单一的#为分界符进行分界，最后把##置换回#。相当繁琐的一个过程。</p>

<p>所以，有没有一种方法，能即不受丢失错位影响，又可以兼容所有字符呢？答案是肯定的。（这句型是如此的NC，以至于所有的电视购物都少不了）</p>

<p>本文我们探讨一种特殊字符 长度前缀的定界方式，并且加入校验机制而保证报文的正确性。具体报文设计是这样的</p>

<p>开始符号
长度信息
报文正文
[校验信息]
结束符号</p>

<p>其中校验信息是可选的，本文的实现里是使用C#的序列化反序列化机制<a href="http://www.roybit.com/wp-content/uploads/2011/01/thumb.jpg" title="未命名">1</a>进行校验，能反序列化则证明报文无误，否则有误。如果选择校验，大可用MD5等算法进行校验。</p>

<p>算法伪代码不再给出，源码已经相当通俗易懂了（至少我是这么觉得）。定界过程需要处理的问题确实很多，尤其需要考虑拼包，一个包拆成几部分而只有第一部分携带了长度信息，这就是很纠结的问题。（话说不画图说明真的是很没有职业道德的行为，但是我真没找到比较方便的可以画这种图的Latex代码，或者工具）</p>

<p>主程序里Debug函数是专门测试各种情况的，有兴趣可以自己测一下，如果有我没考虑到的情况请<strong>火速</strong>通知我，非常感谢。无聊贴一下程序截图吧</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/01/thumb.jpg" title="未命名" alt="未命名" /></p>

<p>本文源码下载： <a href="http://www.roybit.com/wp-content/uploads/2011/01/TCPResolvePacket.rar">源码下载</a></p>

<p>参考文献：</p>

<blockquote><p><a href="http://www.roybit.com/wp-content/uploads/2011/01/thumb.jpg" title="未命名">1</a> 可扩展多线程异步Socket服务器框架EMTASS 2.0，</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2011/01/TCPResolvePacket.rar">2</a> 关于C#序列化结果的长度获取，</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/01/30/get-url-of-songs-from-baidu/">关于从某度扒取歌曲下载链接</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-30T00:00:00+08:00" pubdate data-updated="true">Jan 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>时常从百度下载歌曲但是百度的一个链接点开还会打开一个页面再点再打开一个页面……</p>

<p>所以我们可以从页面分析下载链接然后扒取百度的歌曲链接本来写了一个程序但是百度各个页面之间css差别太大所以发现没有通用性。只能把思想写一下了。</p>

<p>例如我们分析一个页面里有罗大佑的《光阴的故事》HTML源码如下</p>

<blockquote><p>end =</p></blockquote>

<p>至于中间的部分直接查找然后字符串分割即可。</p>

<p>参考文献</p>

<blockquote><p>[1] C# Regex 深入正则表达式</p>

<p>[2] c#用正则表达式获得指定开始和结束字符串中间的一段文本</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/01/30/dream-in-the-box/">盒子的梦想</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-30T00:00:00+08:00" pubdate data-updated="true">Jan 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>——我们的人生其实还很长，还有太多的时间去实现自己的梦想</p>

<blockquote><p>这部短片讲述了一个名叫蕾蕾的女孩在工作闲暇巧遇一个装着1993年的自己写给多年后自己的信的盒子，却发现当年给自己制定，要在人生10000天实现的梦想还有很多没有实现，于是她开始了忙碌的人生的第10000天……From Baiduer</p></blockquote>

<p>这是百度年会商业产品部的一段视频。话说某度有时候还是能给人一点惊喜的。作为Share同样思维的一帮IT geek们，能做出这样一段视频，确实堪称经典了。</p>

<p>算算来北京混迹已经四年半了。生活总是强迫一个人改变，然后让他把这种改变称作“成熟”并且写入博客里。大部分的改变总是使你更加适应环境，但改变总意味着失去，于是，但凡写“成熟”的文章最后都会加上一句：聪明的，你告诉我，我们的日子为什么一去不复返呢？<a href="http://www.roybit.com/wp-content/uploads/2011/01/8759287aa71e36bc2f73b359_thumb.jpg" title="8759287aa71e36bc2f73b359">1</a></p>

<p>不过人的天性总是不甘于沉寂，假如哥伦布甘愿让老婆逮着买房买车送孩子上学，哪还会有新大陆。所以，或许某个周日夜里11时53分，家里翻箱倒柜的你也会突然停下来，想到烦恼如星梦想如云，而你的生活群星灿烂万里无云。于是一种莫名的情感从心底涌起，甚至于你眼睛里会闪亮起晶莹的小东西[2]，而这一切的一切都Definitely地说明：</p>

<p>你寂寞了……</p>

<p>每次写博客都这么习惯性的不靠谱~~其实我只是突然觉得世界很丰富，而且是如此的各不相同。有人在xiaonei上感慨着姚晨与凌霄肃（话说凌霄肃是谁?）的离婚[3]，而某个文明古国的人民还生活在新闻联播所说的“水深火热”之中[4]。有人感慨于梦想照不进现实，有人在盒子里找寻着自己的人生。Life is really a box of chocolate.[5]</p>

<p>受应试教育毒害，以前总习惯写点说服性的文字，隐约有点把自己的想法强加给别人的意思。后来觉得每人都是不一样的，你觉得对的事情可能在别人那里一毛不值，人生导师不都倒掉了么[6]。所以，其实每个人都有梦想，无论是买房买车，出将入相，游学流浪，流芳百世抑或是敏感词敏感词神马的。梦想很多，只不过有的（甚至全部）被你放弃了而已。所以，关于梦想这事情，我们最需要听取的就是一句话：</p>

<p>该干嘛……干嘛去吧……</p>

<p>最后扯点不靠谱的：</p>

<p>话说主演的这位T大的师姐徐蕾真是大美女啊^_^，尤其在IT届……大家可以去她的百度说吧（）follow一下。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/01/8759287aa71e36bc2f73b359_thumb.jpg" title="8759287aa71e36bc2f73b359" alt="8759287aa71e36bc2f73b359" /></p>

<p>另外，也有网友爆料，说《盒子里的梦想》和《one minute fly》（见下）的片子十分相似[7]，感觉后者确实很有意思（非常推荐看一下），但是没有前者那么贴近生活……至少是我们这些IT北漂的生活……</p>

<p>参考文献：</p>

<blockquote><p><a href="http://www.roybit.com/wp-content/uploads/2011/01/8759287aa71e36bc2f73b359_thumb.jpg" title="8759287aa71e36bc2f73b359">1</a> 朱自清，《匆匆》，</p>

<p>[2] 罗永浩，2010年老罗全国巡演完结篇－－海淀剧院，</p>

<p>[3] 姚晨凌潇肃被爆已办离婚 爆料与唐一菲有关，</p>

<p>[4] 埃及骚乱暂时平息 坦克开进广场士兵拒绝开枪，</p>

<p>[5] Life is a Box of Chocolate，</p>

<p>[6] 人生导师的倒掉，</p>

<p>[7] 百度年会视频《盒子里的梦想》爆红网络，</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/01/28/about-data-binding-of-DataGridView-under-dotNet/">关于.Net下DataGridView绑定自定义数据结构的问题</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-28T00:00:00+08:00" pubdate data-updated="true">Jan 28<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>数据绑定是个非常有用的东东，经常在C 下写MVC结构程序的童鞋可能都苦于界面（View）和数据（Model）之间的一致，如果View单一而且需要做的一致性工作不多的话，我们经常会直接在Controller里写更新操作（如图1所示），而如果有多个View，数据同步复杂的话，经常需要手动实现一个观察者模式，每个对数据（Model）的原子操作都需要同时对View进行更新（如图2所示）。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/01/1_thumb.jpg" title="临时1" alt="临时1" /><img src="http://www.roybit.com/wp-content/uploads/2011/01/3_thumb.jpg" title="临时3" alt="临时3" /></p>

<p>图1 图2</p>

<p>总的来说.Net平台设计还是非常优秀而人性化的，比如说数据绑定。数据绑定相当于自动实现了从Model到View的数据更新（如图3所示），而免去了自己管理数据一致和自己实现观察者模式的麻烦。同时，DataGridView控件的引入极大的方便了表格形式数据的显示和操作，这个比C 里德ListCtrl使用起来要方便很多。</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/01/2_thumb.jpg" title="临时2" alt="临时2" /></p>

<p>图3</p>

<p>扯了好多无关的东东，该进入正题了。我们要探讨的是DataGridView控件绑定自定义数据结构的问题。我们要实现的目的是绑定到一个List的结构里，而T可以自己定义。具体的代码不贴了，参考文献1里有一个比较简明的例子。一个比较突出的问题是List没有实现ISort接口，所以绑定后无法自动排序，参考文献2里有相应的解决方法，其中封装的BindingCollection泛型类可以直接作为List泛型的替代品来使用。</p>

<p>本文主要探讨的问题是其中一个更小的问题。就是使用了BindingCollection之后绑定数据前后数据列会发生变化，如下所示：</p>

<p><img src="http://www.roybit.com/wp-content/uploads/2011/01/test_thumb.jpg" title="test" alt="test" /> 可见顺序发生了变化，这里没有项的增加，但是如果有没加入的列，DataGridView会自动添加一个列，这个问题很讨厌啊。试了好久之后，从MSDN里查到一个属性AutoGenerateColumns，这个属性在属性编辑器里没有可视化的编辑项，但是可以通过代码设置，所以只需要设置</p>

<blockquote><p>dataGridClient.AutoGenerateColumns = false;</p></blockquote>

<p>即可避免此问题。</p>

<p>参考文献：</p>

<blockquote><p><a href="http://www.roybit.com/wp-content/uploads/2011/01/1_thumb.jpg" title="临时1">1</a> datagridview如何绑定List，</p>

<p><a href="http://www.roybit.com/wp-content/uploads/2011/01/3_thumb.jpg" title="临时3">2</a> 解决DataGridView绑定List后不能排序的问题，</p></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/01/27/use-livewriter-to-write-blogs-on-cnblogs-and-csdn/">用LiveWriter写CNBlogs和CSDN的博客</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-27T00:00:00+08:00" pubdate data-updated="true">Jan 27<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>习惯了LiveWriter写博客，于是想把各个地方的博客整合到一起，CNBlogs非常简单，只需要在添加帐户里选择WordPress填入用户名即可，CSDN非常麻烦，我试了好久没找到对应的组合，后来发现有高人指出应该使用Metaweblog，果然，方法见下：</p>

<blockquote></blockquote>
</div>
  
  


    </article>
  
  
    <article class="well">
      
  <header class="page-header">
    
      <h2 class="entry-title"><a href="/2011/01/27/an-article-from-the-web/">转一篇网络文章</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-27T00:00:00+08:00" pubdate data-updated="true">Jan 27<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1></h1>

<p>从0到1亿美元 —- PopCap创始人John Vechey自述</p>

<blockquote></blockquote>

<p><img src="http://image.beekka.com/blog/201010/bg2010102403.jpg" alt="bg2010102403.jpg" /></p>

<p>看完之后又两个突出的感觉:</p>

<blockquote><ol>
<li> 穷人的孩子早当家</li>
<li> 成功的创业者貌似都没有读完学位，无论是大学还是研究生，such as 乔布斯乔大爷和盖茨大爷，以及facebook的创始人马克·扎克伯格。</li>
<li> 所以，奋发图强，争取早日退学才是王道啊。</li>
</ol></blockquote>

</div>
  
  


    </article>
  
  <ul class="pager">
    
    <li class="previous"><a href="/page/7/">&larr; Older</a></li>
    
    <li><a href="/blog/archives">Blog Archives</a></li>
    
    <li class="next"><a href="/page/5/">Newer &rarr;</a></li>
    
  </ul>
</div>
<aside class="sidebar-nav span3">
  
    <section class="well">
    <div class="profilepic align-center">
        <script src="/javascripts/md5.js"></script>
        <script type="text/javascript">
            $(function(){
                    $('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("sdqxcxh@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' class='img-rounded' />");
                    });
        </script>
    </div>
    <hr/>

    <ul id="about_me" class="nav nav-list">
        <li class="nav-header">About Me</li>
        <li>北航本，清华硕，现就职于支付宝北京（北厂环球车间OceanBase生产线）</li>
    </ul>
</section>
<section class="well">
    <ul id="profile" class="nav nav-list">
        <li class="nav-header">Profile</li>
        <li><a href="https://github.com/chenxiaohui/">GitHub</a></li>
        <li><a href="http://weibo.com/sdqxcxh/">Weibo</a></li>
        <li><a href="http://renren.com/sdqxcxh/">Renren</a></li>
        <li><a href="https://twitter.com/sdqxcxh/">Twitter</a></li>
        <li><a href="https://facebook.com/sdqxcxh/">Facebook</a></li>
    </ul>
</section>
<section class="well">
    <ul id="feeling" class="nav nav-list">
        <li class="nav-header">一点心情</li>
    </ul>
    <p></p>
    <img src="/images/common/star_in_the_sky.jpg" class="notice_pic img-polaroid" alt="每当我找不到存在的意义，每当我迷失在黑夜里，夜空中最亮的星，请照亮我前行" />
    <p></p>
    <p class="indent">
        每当我找不到存在的意义，每当我迷失在黑夜里，夜空中最亮的星，请照亮我前行
    </p>
    <p class="align-right">
        ——《夜空中最亮的星》
    </p>
</section>
<section class="well">
  <ul id="recent_posts" class="nav nav-list">
    <li class="nav-header">Recent Posts</li>
    
      <li class="post">
        <a href="/2013/10/29/use-gdb-to-test-multi-servers-in-ob/">用gdb调试分布式系统（OB中的应用）</a>
      </li>
    
      <li class="post">
        <a href="/2013/10/27/brightest-star-in-the-sky/">夜空中最亮的星</a>
      </li>
    
      <li class="post">
        <a href="/2013/10/25/history-of-tian-chao/">(转)天朝六十年编年史</a>
      </li>
    
      <li class="post">
        <a href="/2013/10/21/table-tablet-iterator/">Oceanbase迭代器说明</a>
      </li>
    
      <li class="post">
        <a href="/2013/10/18/update-to-ubuntu-13-10/">升级到ubuntu13.10</a>
      </li>
    
  </ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo" class="page-footer"><hr>
<p>
  Copyright &copy; 2013 - Harry Chen -
  <span class="credit">
      Powered by <a href="http://octopress.org">Octopress</a> /
                 <a href="http://getbootstrap.com/2.3.2/">Bootstrap</a> -
  </span>
  <span class="credit">Statistics 
<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_5674020'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s9.cnzz.com/stat.php%3Fid%3D5674020%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));</script>

 </span>
</p>

</footer>
  








<script type="text/javascript" >
<!--
    $(function() {
      $('pre').addClass('prettyprint').attr('style', 'overflow:auto');
      window.prettyPrint && prettyPrint();
      $('table').addClass('table')
});
-->
</script>


</body>
</html>
